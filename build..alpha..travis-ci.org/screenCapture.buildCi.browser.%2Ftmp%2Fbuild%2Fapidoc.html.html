<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/tommy351/warehouse#readme">warehouse (v2.2.0)</a>
</h1>
<h4>Simple JSON-based database</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse">module warehouse</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.warehouse">
            function <span class="apidocSignatureSpan"></span>warehouse
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema">
            function <span class="apidocSignatureSpan">warehouse.</span>Schema
            <span class="apidocSignatureSpan">(schema)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.SchemaType">
            function <span class="apidocSignatureSpan">warehouse.</span>SchemaType
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.array">
            function <span class="apidocSignatureSpan">warehouse.</span>array
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.boolean">
            function <span class="apidocSignatureSpan">warehouse.</span>boolean
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.buffer">
            function <span class="apidocSignatureSpan">warehouse.</span>buffer
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.cuid">
            function <span class="apidocSignatureSpan">warehouse.</span>cuid
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.date">
            function <span class="apidocSignatureSpan">warehouse.</span>date
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.document">
            function <span class="apidocSignatureSpan">warehouse.</span>document
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.enum">
            function <span class="apidocSignatureSpan">warehouse.</span>enum
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.error">
            function <span class="apidocSignatureSpan">warehouse.</span>error
            <span class="apidocSignatureSpan">(msg, code)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.integer">
            function <span class="apidocSignatureSpan">warehouse.</span>integer
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model">
            function <span class="apidocSignatureSpan">warehouse.</span>model
            <span class="apidocSignatureSpan">(name, schema_)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.mutex">
            function <span class="apidocSignatureSpan">warehouse.</span>mutex
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.number">
            function <span class="apidocSignatureSpan">warehouse.</span>number
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.object">
            function <span class="apidocSignatureSpan">warehouse.</span>object
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.population">
            function <span class="apidocSignatureSpan">warehouse.</span>population
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query">
            function <span class="apidocSignatureSpan">warehouse.</span>query
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.string">
            function <span class="apidocSignatureSpan">warehouse.</span>string
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.validation">
            function <span class="apidocSignatureSpan">warehouse.</span>validation
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.virtual">
            function <span class="apidocSignatureSpan">warehouse.</span>virtual
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>Schema.Types</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>Schema.Types.Array.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>Schema.Types.Boolean.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>Schema.Types.Buffer.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>Schema.Types.CUID.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>Schema.Types.Date.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>Schema.Types.Enum.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>Schema.Types.Integer.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>Schema.Types.Number.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>Schema.Types.String.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>Schema.Types.Virtual.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>Schema.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>SchemaType.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>document.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>model.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>mutex.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>query.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.</span>util</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">warehouse.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.Schema">module warehouse.Schema</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Schema">
            function <span class="apidocSignatureSpan">warehouse.</span>Schema
            <span class="apidocSignatureSpan">(schema)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.Schema.</span>Types</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.Schema.Types">module warehouse.Schema.Types</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Array">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Array
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Boolean">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Boolean
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Buffer">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Buffer
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.CUID">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>CUID
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Date">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Date
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Enum">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Enum
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Integer">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Integer
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Mixed">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Mixed
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Number">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Number
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Object">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Object
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.String">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>String
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Virtual">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Virtual
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.Schema.Types.Array.prototype">module warehouse.Schema.Types.Array.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Array.prototype.cast">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Array.prototype.</span>cast
            <span class="apidocSignatureSpan">(value_, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Array.prototype.compare">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Array.prototype.</span>compare
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Array.prototype.match">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Array.prototype.</span>match
            <span class="apidocSignatureSpan">(value, query, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Array.prototype.parse">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Array.prototype.</span>parse
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Array.prototype.validate">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Array.prototype.</span>validate
            <span class="apidocSignatureSpan">(value_, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Array.prototype.value">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Array.prototype.</span>value
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.Schema.Types.Boolean.prototype">module warehouse.Schema.Types.Boolean.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Boolean.prototype.cast">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Boolean.prototype.</span>cast
            <span class="apidocSignatureSpan">(value_, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Boolean.prototype.parse">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Boolean.prototype.</span>parse
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Boolean.prototype.validate">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Boolean.prototype.</span>validate
            <span class="apidocSignatureSpan">(value_, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Boolean.prototype.value">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Boolean.prototype.</span>value
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.Schema.Types.Buffer.prototype">module warehouse.Schema.Types.Buffer.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Buffer.prototype.cast">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Buffer.prototype.</span>cast
            <span class="apidocSignatureSpan">(value_, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Buffer.prototype.compare">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Buffer.prototype.</span>compare
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Buffer.prototype.match">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Buffer.prototype.</span>match
            <span class="apidocSignatureSpan">(value, query, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Buffer.prototype.parse">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Buffer.prototype.</span>parse
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Buffer.prototype.validate">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Buffer.prototype.</span>validate
            <span class="apidocSignatureSpan">(value_, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Buffer.prototype.value">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Buffer.prototype.</span>value
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.Schema.Types.CUID.prototype">module warehouse.Schema.Types.CUID.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.CUID.prototype.cast">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.CUID.prototype.</span>cast
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.CUID.prototype.validate">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.CUID.prototype.</span>validate
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.Schema.Types.Date.prototype">module warehouse.Schema.Types.Date.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Date.prototype.cast">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Date.prototype.</span>cast
            <span class="apidocSignatureSpan">(value_, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Date.prototype.compare">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Date.prototype.</span>compare
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Date.prototype.match">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Date.prototype.</span>match
            <span class="apidocSignatureSpan">(value, query, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Date.prototype.parse">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Date.prototype.</span>parse
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Date.prototype.validate">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Date.prototype.</span>validate
            <span class="apidocSignatureSpan">(value_, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Date.prototype.value">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Date.prototype.</span>value
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.Schema.Types.Enum.prototype">module warehouse.Schema.Types.Enum.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Enum.prototype.validate">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Enum.prototype.</span>validate
            <span class="apidocSignatureSpan">(value_, data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.Schema.Types.Integer.prototype">module warehouse.Schema.Types.Integer.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Integer.prototype.cast">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Integer.prototype.</span>cast
            <span class="apidocSignatureSpan">(value_, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Integer.prototype.validate">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Integer.prototype.</span>validate
            <span class="apidocSignatureSpan">(value_, data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.Schema.Types.Number.prototype">module warehouse.Schema.Types.Number.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Number.prototype.cast">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Number.prototype.</span>cast
            <span class="apidocSignatureSpan">(value_, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Number.prototype.validate">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Number.prototype.</span>validate
            <span class="apidocSignatureSpan">(value_, data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.Schema.Types.String.prototype">module warehouse.Schema.Types.String.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.String.prototype.cast">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.String.prototype.</span>cast
            <span class="apidocSignatureSpan">(value_, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.String.prototype.match">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.String.prototype.</span>match
            <span class="apidocSignatureSpan">(value, query, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.String.prototype.validate">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.String.prototype.</span>validate
            <span class="apidocSignatureSpan">(value_, data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.Schema.Types.Virtual.prototype">module warehouse.Schema.Types.Virtual.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Virtual.prototype.cast">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Virtual.prototype.</span>cast
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Virtual.prototype.get">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Virtual.prototype.</span>get
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Virtual.prototype.set">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Virtual.prototype.</span>set
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.Types.Virtual.prototype.validate">
            function <span class="apidocSignatureSpan">warehouse.Schema.Types.Virtual.prototype.</span>validate
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.Schema.prototype">module warehouse.Schema.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype._applyGetters">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_applyGetters
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype._applySetters">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_applySetters
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype._execQuery">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_execQuery
            <span class="apidocSignatureSpan">(query)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype._execSort">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_execSort
            <span class="apidocSignatureSpan">(sorts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype._exportDatabase">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_exportDatabase
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype._parseDatabase">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_parseDatabase
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype._parseNormalQuery">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_parseNormalQuery
            <span class="apidocSignatureSpan">(queries, prefix_)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype._parsePopulate">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_parsePopulate
            <span class="apidocSignatureSpan">(expr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype._parseQuery">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_parseQuery
            <span class="apidocSignatureSpan">(queries)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype._parseQueryArray">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_parseQueryArray
            <span class="apidocSignatureSpan">(arr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype._parseSort">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_parseSort
            <span class="apidocSignatureSpan">(sorts, prefix_)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype._parseUpdate">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_parseUpdate
            <span class="apidocSignatureSpan">(updates, prefix_)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype._updateStack">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_updateStack
            <span class="apidocSignatureSpan">(name, type)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype.add">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>add
            <span class="apidocSignatureSpan">(schema, prefix_)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype.method">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>method
            <span class="apidocSignatureSpan">(name, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype.path">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>path
            <span class="apidocSignatureSpan">(name, obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype.post">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>post
            <span class="apidocSignatureSpan">(type, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype.pre">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>pre
            <span class="apidocSignatureSpan">(type, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype.static">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>static
            <span class="apidocSignatureSpan">(name, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.Schema.prototype.virtual">
            function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>virtual
            <span class="apidocSignatureSpan">(name, getter)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>Types</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.SchemaType">module warehouse.SchemaType</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.SchemaType.SchemaType">
            function <span class="apidocSignatureSpan">warehouse.</span>SchemaType
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.SchemaType.prototype">module warehouse.SchemaType.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.SchemaType.prototype.cast">
            function <span class="apidocSignatureSpan">warehouse.SchemaType.prototype.</span>cast
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.SchemaType.prototype.compare">
            function <span class="apidocSignatureSpan">warehouse.SchemaType.prototype.</span>compare
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.SchemaType.prototype.match">
            function <span class="apidocSignatureSpan">warehouse.SchemaType.prototype.</span>match
            <span class="apidocSignatureSpan">(value, query, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.SchemaType.prototype.parse">
            function <span class="apidocSignatureSpan">warehouse.SchemaType.prototype.</span>parse
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.SchemaType.prototype.validate">
            function <span class="apidocSignatureSpan">warehouse.SchemaType.prototype.</span>validate
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.SchemaType.prototype.value">
            function <span class="apidocSignatureSpan">warehouse.SchemaType.prototype.</span>value
            <span class="apidocSignatureSpan">(value, data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.array">module warehouse.array</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.array.array">
            function <span class="apidocSignatureSpan">warehouse.</span>array
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.array.super_">
            function <span class="apidocSignatureSpan">warehouse.array.</span>super_
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.boolean">module warehouse.boolean</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.boolean.boolean">
            function <span class="apidocSignatureSpan">warehouse.</span>boolean
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.boolean.super_">
            function <span class="apidocSignatureSpan">warehouse.boolean.</span>super_
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.buffer">module warehouse.buffer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.buffer.buffer">
            function <span class="apidocSignatureSpan">warehouse.</span>buffer
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.buffer.super_">
            function <span class="apidocSignatureSpan">warehouse.buffer.</span>super_
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.cuid">module warehouse.cuid</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.cuid.cuid">
            function <span class="apidocSignatureSpan">warehouse.</span>cuid
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.cuid.super_">
            function <span class="apidocSignatureSpan">warehouse.cuid.</span>super_
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.date">module warehouse.date</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.date.date">
            function <span class="apidocSignatureSpan">warehouse.</span>date
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.date.super_">
            function <span class="apidocSignatureSpan">warehouse.date.</span>super_
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.document">module warehouse.document</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.document.document">
            function <span class="apidocSignatureSpan">warehouse.</span>document
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.document.prototype">module warehouse.document.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.document.prototype.populate">
            function <span class="apidocSignatureSpan">warehouse.document.prototype.</span>populate
            <span class="apidocSignatureSpan">(expr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.document.prototype.remove">
            function <span class="apidocSignatureSpan">warehouse.document.prototype.</span>remove
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.document.prototype.replace">
            function <span class="apidocSignatureSpan">warehouse.document.prototype.</span>replace
            <span class="apidocSignatureSpan">(data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.document.prototype.save">
            function <span class="apidocSignatureSpan">warehouse.document.prototype.</span>save
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.document.prototype.toObject">
            function <span class="apidocSignatureSpan">warehouse.document.prototype.</span>toObject
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.document.prototype.toString">
            function <span class="apidocSignatureSpan">warehouse.document.prototype.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.document.prototype.update">
            function <span class="apidocSignatureSpan">warehouse.document.prototype.</span>update
            <span class="apidocSignatureSpan">(data, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.enum">module warehouse.enum</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.enum.enum">
            function <span class="apidocSignatureSpan">warehouse.</span>enum
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.enum.super_">
            function <span class="apidocSignatureSpan">warehouse.enum.</span>super_
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.error">module warehouse.error</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.error.error">
            function <span class="apidocSignatureSpan">warehouse.</span>error
            <span class="apidocSignatureSpan">(msg, code)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.error.super_">
            function <span class="apidocSignatureSpan">warehouse.error.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">warehouse.error.</span>ID_EXIST</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">warehouse.error.</span>ID_NOT_EXIST</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">warehouse.error.</span>ID_UNDEFINED</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.integer">module warehouse.integer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.integer.integer">
            function <span class="apidocSignatureSpan">warehouse.</span>integer
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.integer.super_">
            function <span class="apidocSignatureSpan">warehouse.integer.</span>super_
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.model">module warehouse.model</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.model">
            function <span class="apidocSignatureSpan">warehouse.</span>model
            <span class="apidocSignatureSpan">(name, schema_)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.super_">
            function <span class="apidocSignatureSpan">warehouse.model.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.model.prototype">module warehouse.model.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype._acquireWriteLock">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_acquireWriteLock
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype._export">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_export
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype._import">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_import
            <span class="apidocSignatureSpan">(arr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype._insertOne">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_insertOne
            <span class="apidocSignatureSpan">(data_)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype._populate">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_populate
            <span class="apidocSignatureSpan">(data, stack)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype._populateGetter">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_populateGetter
            <span class="apidocSignatureSpan">(data, model, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype._populateGetterArray">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_populateGetterArray
            <span class="apidocSignatureSpan">(data, model, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype._removeById">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_removeById
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype._replaceById">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_replaceById
            <span class="apidocSignatureSpan">(id, data_)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype._updateWithStack">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_updateWithStack
            <span class="apidocSignatureSpan">(id, stack)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.count">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>count
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.destroy">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>destroy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.each">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>each
            <span class="apidocSignatureSpan">(iterator, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.eq">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>eq
            <span class="apidocSignatureSpan">(i_, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.every">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>every
            <span class="apidocSignatureSpan">(iterator)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.filter">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>filter
            <span class="apidocSignatureSpan">(iterator, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.find">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>find
            <span class="apidocSignatureSpan">(query, options_)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.findById">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>findById
            <span class="apidocSignatureSpan">(id, options_)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.findOne">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>findOne
            <span class="apidocSignatureSpan">(query, options_)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.first">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>first
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.forEach">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>forEach
            <span class="apidocSignatureSpan">(iterator, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.get">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>get
            <span class="apidocSignatureSpan">(id, options_)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.has">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>has
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.insert">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>insert
            <span class="apidocSignatureSpan">(data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.insertOne">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>insertOne
            <span class="apidocSignatureSpan">(data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.last">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>last
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.limit">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>limit
            <span class="apidocSignatureSpan">(i)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.map">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>map
            <span class="apidocSignatureSpan">(iterator, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.new">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>new
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.populate">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>populate
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.random">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>random
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.reduce">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>reduce
            <span class="apidocSignatureSpan">(iterator, initial)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.reduceRight">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>reduceRight
            <span class="apidocSignatureSpan">(iterator, initial)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.remove">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>remove
            <span class="apidocSignatureSpan">(query, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.removeById">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>removeById
            <span class="apidocSignatureSpan">(id, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.replace">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>replace
            <span class="apidocSignatureSpan">(query, data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.replaceById">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>replaceById
            <span class="apidocSignatureSpan">(id, data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.reverse">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>reverse
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.save">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>save
            <span class="apidocSignatureSpan">(data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.shuffle">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>shuffle
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.size">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>size
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.skip">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>skip
            <span class="apidocSignatureSpan">(i)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.slice">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>slice
            <span class="apidocSignatureSpan">(start_, end_)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.some">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>some
            <span class="apidocSignatureSpan">(iterator)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.sort">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>sort
            <span class="apidocSignatureSpan">(orderby, order)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.toArray">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>toArray
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.update">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>update
            <span class="apidocSignatureSpan">(query, data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.model.prototype.updateById">
            function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>updateById
            <span class="apidocSignatureSpan">(id, update, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.mutex">module warehouse.mutex</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.mutex.mutex">
            function <span class="apidocSignatureSpan">warehouse.</span>mutex
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.mutex.prototype">module warehouse.mutex.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.mutex.prototype.lock">
            function <span class="apidocSignatureSpan">warehouse.mutex.prototype.</span>lock
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.mutex.prototype.unlock">
            function <span class="apidocSignatureSpan">warehouse.mutex.prototype.</span>unlock
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.number">module warehouse.number</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.number.number">
            function <span class="apidocSignatureSpan">warehouse.</span>number
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.number.super_">
            function <span class="apidocSignatureSpan">warehouse.number.</span>super_
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.object">module warehouse.object</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.object.object">
            function <span class="apidocSignatureSpan">warehouse.</span>object
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.object.super_">
            function <span class="apidocSignatureSpan">warehouse.object.</span>super_
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.population">module warehouse.population</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.population.population">
            function <span class="apidocSignatureSpan">warehouse.</span>population
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.population.super_">
            function <span class="apidocSignatureSpan">warehouse.population.</span>super_
            <span class="apidocSignatureSpan">(msg, code)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.query">module warehouse.query</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.query">
            function <span class="apidocSignatureSpan">warehouse.</span>query
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.query.prototype">module warehouse.query.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.count">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>count
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.each">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>each
            <span class="apidocSignatureSpan">(iterator)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.eq">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>eq
            <span class="apidocSignatureSpan">(i)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.every">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>every
            <span class="apidocSignatureSpan">(iterator)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.filter">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>filter
            <span class="apidocSignatureSpan">(iterator)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.find">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>find
            <span class="apidocSignatureSpan">(query, options_)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.findOne">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>findOne
            <span class="apidocSignatureSpan">(query, options_)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.first">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>first
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.forEach">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>forEach
            <span class="apidocSignatureSpan">(iterator)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.last">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>last
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.limit">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>limit
            <span class="apidocSignatureSpan">(i)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.map">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>map
            <span class="apidocSignatureSpan">(iterator)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.populate">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>populate
            <span class="apidocSignatureSpan">(expr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.random">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>random
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.reduce">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>reduce
            <span class="apidocSignatureSpan">(iterator, initial)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.reduceRight">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>reduceRight
            <span class="apidocSignatureSpan">(iterator, initial)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.remove">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>remove
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.replace">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>replace
            <span class="apidocSignatureSpan">(data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.reverse">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>reverse
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.shuffle">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>shuffle
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.size">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>size
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.skip">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>skip
            <span class="apidocSignatureSpan">(i)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.slice">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>slice
            <span class="apidocSignatureSpan">(start, end)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.some">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>some
            <span class="apidocSignatureSpan">(iterator)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.sort">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>sort
            <span class="apidocSignatureSpan">(orderby, order)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.toArray">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>toArray
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.query.prototype.update">
            function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>update
            <span class="apidocSignatureSpan">(data, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.string">module warehouse.string</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.string.string">
            function <span class="apidocSignatureSpan">warehouse.</span>string
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.string.super_">
            function <span class="apidocSignatureSpan">warehouse.string.</span>super_
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.util">module warehouse.util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.util.arr2obj">
            function <span class="apidocSignatureSpan">warehouse.util.</span>arr2obj
            <span class="apidocSignatureSpan">(arr, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.util.delProp">
            function <span class="apidocSignatureSpan">warehouse.util.</span>delProp
            <span class="apidocSignatureSpan">(obj, key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.util.getProp">
            function <span class="apidocSignatureSpan">warehouse.util.</span>getProp
            <span class="apidocSignatureSpan">(obj, key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.util.inherits">
            function <span class="apidocSignatureSpan">warehouse.util.</span>inherits
            <span class="apidocSignatureSpan">(ctor, superCtor)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.util.isDate">
            function <span class="apidocSignatureSpan">warehouse.util.</span>isDate
            <span class="apidocSignatureSpan">(d)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.util.parseArgs">
            function <span class="apidocSignatureSpan">warehouse.util.</span>parseArgs
            <span class="apidocSignatureSpan">(orderby, order)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.util.reverse">
            function <span class="apidocSignatureSpan">warehouse.util.</span>reverse
            <span class="apidocSignatureSpan">(arr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.util.setGetter">
            function <span class="apidocSignatureSpan">warehouse.util.</span>setGetter
            <span class="apidocSignatureSpan">(obj, key, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.util.setProp">
            function <span class="apidocSignatureSpan">warehouse.util.</span>setProp
            <span class="apidocSignatureSpan">(obj, key, value)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.validation">module warehouse.validation</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.validation.validation">
            function <span class="apidocSignatureSpan">warehouse.</span>validation
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.validation.super_">
            function <span class="apidocSignatureSpan">warehouse.validation.</span>super_
            <span class="apidocSignatureSpan">(msg, code)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.warehouse.virtual">module warehouse.virtual</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.virtual.virtual">
            function <span class="apidocSignatureSpan">warehouse.</span>virtual
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.warehouse.virtual.super_">
            function <span class="apidocSignatureSpan">warehouse.virtual.</span>super_
            <span class="apidocSignatureSpan">(name, options)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse" id="apidoc.module.warehouse">module warehouse</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.warehouse" id="apidoc.element.warehouse.warehouse">
        function <span class="apidocSignatureSpan"></span>warehouse
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Database(options) {
  this.options = extend({
    version: 0,
    onUpgrade: function() {},

    onDowngrade: function() {}
  }, options);

  this._models = {};

  var _Model = this.Model = function(name, schema) {
    Model.call(this, name, schema);
  };

  util.inherits(_Model, Model);
  _Model.prototype._database = this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema" id="apidoc.element.warehouse.Schema">
        function <span class="apidocSignatureSpan">warehouse.</span>Schema
        <span class="apidocSignatureSpan">(schema)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Schema(schema) {
  this.paths = {};
  this.statics = {};
  this.methods = {};

  this.hooks = {
    pre: {
      save: [],
      remove: []
    },
    post: {
      save: [],
      remove: []
    }
  };

  this.stacks = {
    getter: [],
    setter: [],
    import: [],
    export: []
  };

  if (schema) {
    this.add(schema);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.SchemaType" id="apidoc.element.warehouse.SchemaType">
        function <span class="apidocSignatureSpan">warehouse.</span>SchemaType
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaType(name, options) {
  this.name = name || '';

  this.options = assign({
    required: false
  }, options);

  var default_ = this.options.default;

  if (typeof default_ === 'function') {
    this.default = default_;
  } else {
    this.default = function() {
      return default_;
    };
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.array" id="apidoc.element.warehouse.array">
        function <span class="apidocSignatureSpan">warehouse.</span>array
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeArray(name, options) {
  SchemaType.call(this, name, extend({
    default: []
  }, options));

  this.child = this.options.child || new SchemaType(name);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.boolean" id="apidoc.element.warehouse.boolean">
        function <span class="apidocSignatureSpan">warehouse.</span>boolean
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeBoolean(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.buffer" id="apidoc.element.warehouse.buffer">
        function <span class="apidocSignatureSpan">warehouse.</span>buffer
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeBuffer(name, options) {
  SchemaType.call(this, name, assign({
    encoding: 'hex'
  }, options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.cuid" id="apidoc.element.warehouse.cuid">
        function <span class="apidocSignatureSpan">warehouse.</span>cuid
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeCUID(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.date" id="apidoc.element.warehouse.date">
        function <span class="apidocSignatureSpan">warehouse.</span>date
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeDate(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.document" id="apidoc.element.warehouse.document">
        function <span class="apidocSignatureSpan">warehouse.</span>document
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Document(data) {
  if (data) {
    var keys = Object.keys(data);
    var key;

    for (var i = 0, len = keys.length; i &lt; len; i++) {
      key = keys[i];
      this[key] = data[key];
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.enum" id="apidoc.element.warehouse.enum">
        function <span class="apidocSignatureSpan">warehouse.</span>enum
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeEnum(name, options) {
  SchemaType.call(this, name, assign({
    elements: []
  }, options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.error" id="apidoc.element.warehouse.error">
        function <span class="apidocSignatureSpan">warehouse.</span>error
        <span class="apidocSignatureSpan">(msg, code)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WarehouseError(msg, code) {
  Error.call(this);

  if (Error.captureStackTrace) {
    Error.captureStackTrace(this);
  } else {
    this.stack = new Error().stack;
  }

  this.name = 'WarehouseError';
  this.message = msg;
  this.code = code;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.integer" id="apidoc.element.warehouse.integer">
        function <span class="apidocSignatureSpan">warehouse.</span>integer
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeInteger(name, options) {
  SchemaTypeNumber.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model" id="apidoc.element.warehouse.model">
        function <span class="apidocSignatureSpan">warehouse.</span>model
        <span class="apidocSignatureSpan">(name, schema_)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Model(name, schema_) {
  EventEmitter.call(this);

  var schema, i, len, key;

  // Define schema
  if (schema_ instanceof Schema) {
    schema = schema_;
  } else if (typeof schema_ === 'object') {
    schema = new Schema(schema_);
  } else {
    schema = new Schema();
  }

  // Set `_id` path for schema
  if (!schema.path('_id')) {
    schema.path('_id', {type: Types.CUID, required: true});
  }

  this.name = name;
  this.data = {};
  this._mutex = new Mutex();
  this.schema = schema;
  this.length = 0;

  var _Document = this.Document = function(data) {
    Document.call(this, data);

    // Apply getters
    schema._applyGetters(this);
  };

  util.inherits(_Document, Document);
  _Document.prototype._model = this;
  _Document.prototype._schema = schema;

  var _Query = this.Query = function(data) {
    Query.call(this, data);
  };

  util.inherits(_Query, Query);
  _Query.prototype._model = this;
  _Query.prototype._schema = schema;

  // Apply static methods
  var statics = schema.statics;
  var staticKeys = Object.keys(statics);

  for (i = 0, len = staticKeys.length; i &lt; len; i++) {
    key = staticKeys[i];
    this[key] = statics[key];
  }

  // Apply instance methods
  var methods = schema.methods;
  var methodKeys = Object.keys(methods);

  for (i = 0, len = methodKeys.length; i &lt; len; i++) {
    key = methodKeys[i];
    _Document.prototype[key] = methods[key];
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

## Usage

``` js
var Database = require('warehouse');
var db = new Database();

var Post = db.<span class="apidocCodeKeywordSpan">model</span>('posts', {
  title: String,
  created: {type: Date, default: Date.now}
});

Post.insert({
  title: 'Hello world'
}).then(function(post){
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.mutex" id="apidoc.element.warehouse.mutex">
        function <span class="apidocSignatureSpan">warehouse.</span>mutex
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Mutex() {
  this._locked = false;
  this._queue = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.number" id="apidoc.element.warehouse.number">
        function <span class="apidocSignatureSpan">warehouse.</span>number
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeNumber(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.object" id="apidoc.element.warehouse.object">
        function <span class="apidocSignatureSpan">warehouse.</span>object
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeObject(name, options) {
  SchemaType.call(this, name, extend({
    default: {}
  }, options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.population" id="apidoc.element.warehouse.population">
        function <span class="apidocSignatureSpan">warehouse.</span>population
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PopulationError(msg) {
  WarehouseError.call(this);

  this.name = 'PopulationError';
  this.message = msg;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query" id="apidoc.element.warehouse.query">
        function <span class="apidocSignatureSpan">warehouse.</span>query
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Query(data) {
  this.data = data;
  this.length = data.length;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.string" id="apidoc.element.warehouse.string">
        function <span class="apidocSignatureSpan">warehouse.</span>string
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeString(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.validation" id="apidoc.element.warehouse.validation">
        function <span class="apidocSignatureSpan">warehouse.</span>validation
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ValidationError(msg) {
  WarehouseError.call(this);

  this.name = 'ValidationError';
  this.message = msg;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.virtual" id="apidoc.element.warehouse.virtual">
        function <span class="apidocSignatureSpan">warehouse.</span>virtual
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeVirtual(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>








































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.Schema" id="apidoc.module.warehouse.Schema">module warehouse.Schema</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.Schema.Schema" id="apidoc.element.warehouse.Schema.Schema">
        function <span class="apidocSignatureSpan">warehouse.</span>Schema
        <span class="apidocSignatureSpan">(schema)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Schema(schema) {
  this.paths = {};
  this.statics = {};
  this.methods = {};

  this.hooks = {
    pre: {
      save: [],
      remove: []
    },
    post: {
      save: [],
      remove: []
    }
  };

  this.stacks = {
    getter: [],
    setter: [],
    import: [],
    export: []
  };

  if (schema) {
    this.add(schema);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.Schema.Types" id="apidoc.module.warehouse.Schema.Types">module warehouse.Schema.Types</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Array" id="apidoc.element.warehouse.Schema.Types.Array">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Array
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeArray(name, options) {
  SchemaType.call(this, name, extend({
    default: []
  }, options));

  this.child = this.options.child || new SchemaType(name);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  type = getSchemaType(name, {type: obj});
  break;

case 'object':
  if (obj.type) {
    type = getSchemaType(name, obj);
  } else if (isArray(obj)) {
    type = new Types.<span class="apidocCodeKeywordSpan">Array</span>(name, {
      child: obj.length ? getSchemaType(name, obj[0]) : new SchemaType(name)
    });
  } else {
    type = new Types.Object();
    nested = Object.keys(obj).length &gt; 0;
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Boolean" id="apidoc.element.warehouse.Schema.Types.Boolean">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Boolean
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeBoolean(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Buffer" id="apidoc.element.warehouse.Schema.Types.Buffer">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Buffer
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeBuffer(name, options) {
  SchemaType.call(this, name, assign({
    encoding: 'hex'
  }, options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.CUID" id="apidoc.element.warehouse.Schema.Types.CUID">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>CUID
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeCUID(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Date" id="apidoc.element.warehouse.Schema.Types.Date">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Date
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeDate(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Enum" id="apidoc.element.warehouse.Schema.Types.Enum">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Enum
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeEnum(name, options) {
  SchemaType.call(this, name, assign({
    elements: []
  }, options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Integer" id="apidoc.element.warehouse.Schema.Types.Integer">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Integer
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeInteger(name, options) {
  SchemaTypeNumber.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Mixed" id="apidoc.element.warehouse.Schema.Types.Mixed">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Mixed
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaType(name, options) {
  this.name = name || '';

  this.options = assign({
    required: false
  }, options);

  var default_ = this.options.default;

  if (typeof default_ === 'function') {
    this.default = default_;
  } else {
    this.default = function() {
      return default_;
    };
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Number" id="apidoc.element.warehouse.Schema.Types.Number">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Number
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeNumber(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Object" id="apidoc.element.warehouse.Schema.Types.Object">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Object
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeObject(name, options) {
  SchemaType.call(this, name, extend({
    default: {}
  }, options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (obj.type) {
    type = getSchemaType(name, obj);
  } else if (isArray(obj)) {
    type = new Types.Array(name, {
      child: obj.length ? getSchemaType(name, obj[0]) : new SchemaType(name)
    });
  } else {
    type = new Types.<span class="apidocCodeKeywordSpan">Object</span>();
    nested = Object.keys(obj).length &gt; 0;
  }

  break;

default:
  throw new TypeError('Invalid value for schema path `' + name + '`');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.String" id="apidoc.element.warehouse.Schema.Types.String">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>String
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeString(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Virtual" id="apidoc.element.warehouse.Schema.Types.Virtual">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.</span>Virtual
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeVirtual(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Adds a virtual path.
 *
 * @param {String} name
 * @param {Function} [getter]
 * @return {SchemaType.Virtual}
 */
Schema.prototype.virtual = function(name, getter) {
  var virtual = new Types.<span class="apidocCodeKeywordSpan">Virtual</span>(name, {});
  if (getter) virtual.get(getter);

  this.path(name, virtual);

  return virtual;
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.Schema.Types.Array.prototype" id="apidoc.module.warehouse.Schema.Types.Array.prototype">module warehouse.Schema.Types.Array.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Array.prototype.cast" id="apidoc.element.warehouse.Schema.Types.Array.prototype.cast">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Array.prototype.</span>cast
        <span class="apidocSignatureSpan">(value_, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cast = function (value_, data) {
  var value = SchemaType.prototype.cast.call(this, value_, data);
  if (value == null) return value;

  if (!isArray(value)) value = [value];
  if (!value.length) return value;

  var child = this.child;

  for (var i = 0, len = value.length; i &lt; len; i++) {
    value[i] = child.cast(value[i], data);
  }

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @private
 */
Schema.prototype._updateStack = function(name, type) {
var stacks = this.stacks;

stacks.getter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">cast</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Array.prototype.compare" id="apidoc.element.warehouse.Schema.Types.Array.prototype.compare">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Array.prototype.</span>compare
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compare = function (a, b) {
  if (a) {
    if (!b) return 1;
  } else {
    return b ? -1 : 0;
  }

  var lenA = a.length;
  var lenB = b.length;
  var child = this.child;
  var result;

  for (var i = 0, len = Math.min(lenA, lenB); i &lt; len; i++) {
    result = child.compare(a[i], b[i]);
    if (result !== 0) return result;
  }

  // Compare by length
  return lenA - lenB;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

function sortStack(path_, key, sort) {
 var path = path_ || new SchemaType(key);
 var descending = sort === 'desc' || sort === -1;

 return function(a, b) {
   var result = path.<span class="apidocCodeKeywordSpan">compare</span>(getProp(a, key), getProp(b, key));
   return descending &amp;&amp; result ? result * -1 : result;
 };
}

/**
* Parses sorting expressions and returns a stack.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Array.prototype.match" id="apidoc.element.warehouse.Schema.Types.Array.prototype.match">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Array.prototype.</span>match
        <span class="apidocSignatureSpan">(value, query, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">match = function (value, query, data) {
  if (!value || !query) {
    return value === query;
  }

  var lenA = value.length;
  var lenB = query.length;

  if (lenA !== lenB) return false;

  var child = this.child;

  for (var i = 0; i &lt; lenA; i++) {
    if (!child.match(value[i], query[i], data)) return false;
  }

  return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return stack;
};

function queryStackNormal(path_, key, query) {
var path = path_ || new SchemaType(key);

return function(data) {
  return path.<span class="apidocCodeKeywordSpan">match</span>(getProp(data, key), query, data);
};
}

function queryStackOperator(path_, qkey, key, query) {
var path = path_ || new SchemaType(key);

return function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Array.prototype.parse" id="apidoc.element.warehouse.Schema.Types.Array.prototype.parse">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Array.prototype.</span>parse
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (value, data) {
  if (!value) return value;

  var len = value.length;
  if (!len) return [];

  var result = new Array(len);
  var child = this.child;

  for (var i = 0; i &lt; len; i++) {
    result[i] = child.parse(value[i], data);
  }

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (!path) throw new WarehouseError('options.path is required');

  return new Promise(function(resolve, reject) {
    var src = fs.createReadStream(path, {encoding: 'utf8'});
    var oldVersion = 0;

    var stream = JSONStream.<span class="apidocCodeKeywordSpan">parse</span>([true, true], function(value, keys) {
      switch (keys.shift()){
        case 'meta':
if (keys.shift() === 'version') {
  oldVersion = value;
}

break;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Array.prototype.validate" id="apidoc.element.warehouse.Schema.Types.Array.prototype.validate">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Array.prototype.</span>validate
        <span class="apidocSignatureSpan">(value_, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (value_, data) {
  var value = SchemaType.prototype.validate.call(this, value_, data);

  if (!isArray(value)) {
    throw new ValidationError('`' + value + '` is not an array!');
  }

  if (!value.length) return value;

  var child = this.child;

  for (var i = 0, len = value.length; i &lt; len; i++) {
    value[i] = child.validate(value[i], data);
  }

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">validate</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Array.prototype.value" id="apidoc.element.warehouse.Schema.Types.Array.prototype.value">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Array.prototype.</span>value
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">value = function (value, data) {
  if (!value) return value;

  var len = value.length;
  if (!len) return [];

  var result = new Array(len);
  var child = this.child;

  for (var i = 0; i &lt; len; i++) {
    result[i] = child.value(value[i], data);
  }

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.export.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">value</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.Schema.Types.Boolean.prototype" id="apidoc.module.warehouse.Schema.Types.Boolean.prototype">module warehouse.Schema.Types.Boolean.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Boolean.prototype.cast" id="apidoc.element.warehouse.Schema.Types.Boolean.prototype.cast">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Boolean.prototype.</span>cast
        <span class="apidocSignatureSpan">(value_, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cast = function (value_, data) {
  var value = SchemaType.prototype.cast.call(this, value_, data);

  if (value === 'false' || value === '0') return false;

  return Boolean(value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @private
 */
Schema.prototype._updateStack = function(name, type) {
var stacks = this.stacks;

stacks.getter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">cast</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Boolean.prototype.parse" id="apidoc.element.warehouse.Schema.Types.Boolean.prototype.parse">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Boolean.prototype.</span>parse
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (value, data) {
  return Boolean(value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (!path) throw new WarehouseError('options.path is required');

  return new Promise(function(resolve, reject) {
    var src = fs.createReadStream(path, {encoding: 'utf8'});
    var oldVersion = 0;

    var stream = JSONStream.<span class="apidocCodeKeywordSpan">parse</span>([true, true], function(value, keys) {
      switch (keys.shift()){
        case 'meta':
if (keys.shift() === 'version') {
  oldVersion = value;
}

break;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Boolean.prototype.validate" id="apidoc.element.warehouse.Schema.Types.Boolean.prototype.validate">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Boolean.prototype.</span>validate
        <span class="apidocSignatureSpan">(value_, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (value_, data) {
  var value = SchemaType.prototype.validate.call(this, value_, data);

  if (value != null &amp;&amp; typeof value !== 'boolean') {
    throw new ValidationError('`' + value + '` is not a boolean!');
  }

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">validate</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Boolean.prototype.value" id="apidoc.element.warehouse.Schema.Types.Boolean.prototype.value">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Boolean.prototype.</span>value
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">value = function (value, data) {
  return +value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.export.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">value</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.Schema.Types.Buffer.prototype" id="apidoc.module.warehouse.Schema.Types.Buffer.prototype">module warehouse.Schema.Types.Buffer.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Buffer.prototype.cast" id="apidoc.element.warehouse.Schema.Types.Buffer.prototype.cast">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Buffer.prototype.</span>cast
        <span class="apidocSignatureSpan">(value_, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cast = function (value_, data) {
  var value = SchemaType.prototype.cast.call(this, value_, data);

  if (value == null || Buffer.isBuffer(value)) return value;
  if (typeof value === 'string') return new Buffer(value, this.options.encoding);
  if (Array.isArray(value)) return new Buffer(value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @private
 */
Schema.prototype._updateStack = function(name, type) {
var stacks = this.stacks;

stacks.getter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">cast</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Buffer.prototype.compare" id="apidoc.element.warehouse.Schema.Types.Buffer.prototype.compare">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Buffer.prototype.</span>compare
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compare = function (a, b) {
  if (Buffer.isBuffer(a)) {
    return Buffer.isBuffer(b) ? bufferCompare(a, b) : 1;
  }

  return Buffer.isBuffer(b) ? -1 : 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

function sortStack(path_, key, sort) {
 var path = path_ || new SchemaType(key);
 var descending = sort === 'desc' || sort === -1;

 return function(a, b) {
   var result = path.<span class="apidocCodeKeywordSpan">compare</span>(getProp(a, key), getProp(b, key));
   return descending &amp;&amp; result ? result * -1 : result;
 };
}

/**
* Parses sorting expressions and returns a stack.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Buffer.prototype.match" id="apidoc.element.warehouse.Schema.Types.Buffer.prototype.match">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Buffer.prototype.</span>match
        <span class="apidocSignatureSpan">(value, query, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">match = function (value, query, data) {
  if (Buffer.isBuffer(value) &amp;&amp; Buffer.isBuffer(query)) {
    return bufferEqual(value, query);
  }

  return value === query;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return stack;
};

function queryStackNormal(path_, key, query) {
var path = path_ || new SchemaType(key);

return function(data) {
  return path.<span class="apidocCodeKeywordSpan">match</span>(getProp(data, key), query, data);
};
}

function queryStackOperator(path_, qkey, key, query) {
var path = path_ || new SchemaType(key);

return function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Buffer.prototype.parse" id="apidoc.element.warehouse.Schema.Types.Buffer.prototype.parse">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Buffer.prototype.</span>parse
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (value, data) {
  return value ? new Buffer(value, this.options.encoding) : value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (!path) throw new WarehouseError('options.path is required');

  return new Promise(function(resolve, reject) {
    var src = fs.createReadStream(path, {encoding: 'utf8'});
    var oldVersion = 0;

    var stream = JSONStream.<span class="apidocCodeKeywordSpan">parse</span>([true, true], function(value, keys) {
      switch (keys.shift()){
        case 'meta':
if (keys.shift() === 'version') {
  oldVersion = value;
}

break;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Buffer.prototype.validate" id="apidoc.element.warehouse.Schema.Types.Buffer.prototype.validate">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Buffer.prototype.</span>validate
        <span class="apidocSignatureSpan">(value_, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (value_, data) {
  var value = SchemaType.prototype.validate.call(this, value_, data);

  if (!Buffer.isBuffer(value)) {
    throw new ValidationError('`' + value + '` is not a valid buffer!');
  }

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">validate</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Buffer.prototype.value" id="apidoc.element.warehouse.Schema.Types.Buffer.prototype.value">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Buffer.prototype.</span>value
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">value = function (value, data) {
  return Buffer.isBuffer(value) ? value.toString(this.options.encoding) : value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.export.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">value</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.Schema.Types.CUID.prototype" id="apidoc.module.warehouse.Schema.Types.CUID.prototype">module warehouse.Schema.Types.CUID.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.CUID.prototype.cast" id="apidoc.element.warehouse.Schema.Types.CUID.prototype.cast">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.CUID.prototype.</span>cast
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cast = function (value, data) {
  if (value == null &amp;&amp; this.options.required) {
    return cuid();
  }

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @private
 */
Schema.prototype._updateStack = function(name, type) {
var stacks = this.stacks;

stacks.getter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">cast</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.CUID.prototype.validate" id="apidoc.element.warehouse.Schema.Types.CUID.prototype.validate">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.CUID.prototype.</span>validate
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (value, data) {
  if (value &amp;&amp; (value[0] !== 'c' || value.length !== 25)) {
    throw new ValidationError('`' + value + '` is not a valid CUID');
  }

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">validate</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.Schema.Types.Date.prototype" id="apidoc.module.warehouse.Schema.Types.Date.prototype">module warehouse.Schema.Types.Date.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Date.prototype.cast" id="apidoc.element.warehouse.Schema.Types.Date.prototype.cast">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Date.prototype.</span>cast
        <span class="apidocSignatureSpan">(value_, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cast = function (value_, data) {
  var value = SchemaType.prototype.cast.call(this, value_, data);

  if (value == null || util.isDate(value)) return value;

  return new Date(value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @private
 */
Schema.prototype._updateStack = function(name, type) {
var stacks = this.stacks;

stacks.getter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">cast</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Date.prototype.compare" id="apidoc.element.warehouse.Schema.Types.Date.prototype.compare">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Date.prototype.</span>compare
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compare = function (a, b) {
  if (a) {
    return b ? a - b : 1;
  }

  return b ? -1 : 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

function sortStack(path_, key, sort) {
 var path = path_ || new SchemaType(key);
 var descending = sort === 'desc' || sort === -1;

 return function(a, b) {
   var result = path.<span class="apidocCodeKeywordSpan">compare</span>(getProp(a, key), getProp(b, key));
   return descending &amp;&amp; result ? result * -1 : result;
 };
}

/**
* Parses sorting expressions and returns a stack.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Date.prototype.match" id="apidoc.element.warehouse.Schema.Types.Date.prototype.match">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Date.prototype.</span>match
        <span class="apidocSignatureSpan">(value, query, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">match = function (value, query, data) {
  if (!value || !query) {
    return value === query;
  }

  return value.getTime() === query.getTime();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return stack;
};

function queryStackNormal(path_, key, query) {
var path = path_ || new SchemaType(key);

return function(data) {
  return path.<span class="apidocCodeKeywordSpan">match</span>(getProp(data, key), query, data);
};
}

function queryStackOperator(path_, qkey, key, query) {
var path = path_ || new SchemaType(key);

return function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Date.prototype.parse" id="apidoc.element.warehouse.Schema.Types.Date.prototype.parse">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Date.prototype.</span>parse
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (value, data) {
  if (value) return new Date(value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (!path) throw new WarehouseError('options.path is required');

  return new Promise(function(resolve, reject) {
    var src = fs.createReadStream(path, {encoding: 'utf8'});
    var oldVersion = 0;

    var stream = JSONStream.<span class="apidocCodeKeywordSpan">parse</span>([true, true], function(value, keys) {
      switch (keys.shift()){
        case 'meta':
if (keys.shift() === 'version') {
  oldVersion = value;
}

break;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Date.prototype.validate" id="apidoc.element.warehouse.Schema.Types.Date.prototype.validate">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Date.prototype.</span>validate
        <span class="apidocSignatureSpan">(value_, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (value_, data) {
  var value = SchemaType.prototype.validate.call(this, value_, data);

  if (value != null &amp;&amp; (!util.isDate(value) || isNaN(value.getTime()))) {
    throw new ValidationError('`' + value + '` is not a valid date!');
  }

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">validate</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Date.prototype.value" id="apidoc.element.warehouse.Schema.Types.Date.prototype.value">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Date.prototype.</span>value
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">value = function (value, data) {
  return value ? value.toISOString() : value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.export.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">value</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.Schema.Types.Enum.prototype" id="apidoc.module.warehouse.Schema.Types.Enum.prototype">module warehouse.Schema.Types.Enum.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Enum.prototype.validate" id="apidoc.element.warehouse.Schema.Types.Enum.prototype.validate">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Enum.prototype.</span>validate
        <span class="apidocSignatureSpan">(value_, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (value_, data) {
  var value = SchemaType.prototype.validate.call(this, value_, data);
  var elements = this.options.elements;

  if (!includes(elements, value)) {
    throw new ValidationError('The value must be one of ' + elements.join(', '));
  }

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">validate</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.Schema.Types.Integer.prototype" id="apidoc.module.warehouse.Schema.Types.Integer.prototype">module warehouse.Schema.Types.Integer.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Integer.prototype.cast" id="apidoc.element.warehouse.Schema.Types.Integer.prototype.cast">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Integer.prototype.</span>cast
        <span class="apidocSignatureSpan">(value_, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cast = function (value_, data) {
  var value = SchemaTypeNumber.prototype.cast.call(this, value_, data);

  return parseInt(value, 10);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @private
 */
Schema.prototype._updateStack = function(name, type) {
var stacks = this.stacks;

stacks.getter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">cast</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Integer.prototype.validate" id="apidoc.element.warehouse.Schema.Types.Integer.prototype.validate">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Integer.prototype.</span>validate
        <span class="apidocSignatureSpan">(value_, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (value_, data) {
  var value = SchemaTypeNumber.prototype.validate.call(this, value_, data);

  if (value % 1 !== 0) {
    throw new ValidationError('`' + value + '` is not an integer!');
  }

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">validate</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.Schema.Types.Number.prototype" id="apidoc.module.warehouse.Schema.Types.Number.prototype">module warehouse.Schema.Types.Number.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Number.prototype.cast" id="apidoc.element.warehouse.Schema.Types.Number.prototype.cast">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Number.prototype.</span>cast
        <span class="apidocSignatureSpan">(value_, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cast = function (value_, data) {
  var value = SchemaType.prototype.cast.call(this, value_, data);

  if (value == null || typeof value === 'number') return value;

  return +value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @private
 */
Schema.prototype._updateStack = function(name, type) {
var stacks = this.stacks;

stacks.getter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">cast</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Number.prototype.validate" id="apidoc.element.warehouse.Schema.Types.Number.prototype.validate">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Number.prototype.</span>validate
        <span class="apidocSignatureSpan">(value_, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (value_, data) {
  var value = SchemaType.prototype.validate.call(this, value_, data);

  if (value !== undefined &amp;&amp; (typeof value !== 'number' || isNaN(value))) {
    throw new ValidationError('`' + value + '` is not a number!');
  }

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">validate</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.Schema.Types.String.prototype" id="apidoc.module.warehouse.Schema.Types.String.prototype">module warehouse.Schema.Types.String.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.String.prototype.cast" id="apidoc.element.warehouse.Schema.Types.String.prototype.cast">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.String.prototype.</span>cast
        <span class="apidocSignatureSpan">(value_, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cast = function (value_, data) {
  var value = SchemaType.prototype.cast.call(this, value_, data);

  if (value == null || typeof value === 'string') return value;
  if (typeof value.toString === 'function') return value.toString();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @private
 */
Schema.prototype._updateStack = function(name, type) {
var stacks = this.stacks;

stacks.getter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">cast</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.String.prototype.match" id="apidoc.element.warehouse.Schema.Types.String.prototype.match">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.String.prototype.</span>match
        <span class="apidocSignatureSpan">(value, query, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">match = function (value, query, data) {
  if (!value || !query) {
    return value === query;
  }

  if (typeof query.test === 'function') {
    return query.test(value);
  }

  return value === query;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return stack;
};

function queryStackNormal(path_, key, query) {
var path = path_ || new SchemaType(key);

return function(data) {
  return path.<span class="apidocCodeKeywordSpan">match</span>(getProp(data, key), query, data);
};
}

function queryStackOperator(path_, qkey, key, query) {
var path = path_ || new SchemaType(key);

return function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.String.prototype.validate" id="apidoc.element.warehouse.Schema.Types.String.prototype.validate">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.String.prototype.</span>validate
        <span class="apidocSignatureSpan">(value_, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (value_, data) {
  var value = SchemaType.prototype.validate.call(this, value_, data);

  if (value !== undefined &amp;&amp; typeof value !== 'string') {
    throw new ValidationError('`' + value + '` is not a string!');
  }

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">validate</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.Schema.Types.Virtual.prototype" id="apidoc.module.warehouse.Schema.Types.Virtual.prototype">module warehouse.Schema.Types.Virtual.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Virtual.prototype.cast" id="apidoc.element.warehouse.Schema.Types.Virtual.prototype.cast">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Virtual.prototype.</span>cast
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cast = function (value, data) {
  if (typeof this.getter !== 'function') return;

  var getter = this.getter;
  var hasCache = false;
  var cache;

  setGetter(data, this.name, function() {
    if (!hasCache) {
      cache = getter.call(data);
      hasCache = true;
    }

    return cache;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @private
 */
Schema.prototype._updateStack = function(name, type) {
var stacks = this.stacks;

stacks.getter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">cast</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Virtual.prototype.get" id="apidoc.element.warehouse.Schema.Types.Virtual.prototype.get">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Virtual.prototype.</span>get
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (fn) {
  if (typeof fn !== 'function') {
    throw new TypeError('Getter must be a function!');
  }

  this.getter = fn;

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *
 * @param {String} name
 * @param {Function} [getter]
 * @return {SchemaType.Virtual}
 */
Schema.prototype.virtual = function(name, getter) {
  var virtual = new Types.Virtual(name, {});
  if (getter) virtual.<span class="apidocCodeKeywordSpan">get</span>(getter);

  this.path(name, virtual);

  return virtual;
};

function checkHookType(type) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Virtual.prototype.set" id="apidoc.element.warehouse.Schema.Types.Virtual.prototype.set">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Virtual.prototype.</span>set
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set = function (fn) {
  if (typeof fn !== 'function') {
    throw new TypeError('Setter must be a function!');
  }

  this.setter = fn;

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.Types.Virtual.prototype.validate" id="apidoc.element.warehouse.Schema.Types.Virtual.prototype.validate">
        function <span class="apidocSignatureSpan">warehouse.Schema.Types.Virtual.prototype.</span>validate
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (value, data) {
  if (typeof this.setter === 'function') {
    this.setter.call(data, value);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">validate</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.Schema.prototype" id="apidoc.module.warehouse.Schema.prototype">module warehouse.Schema.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype._applyGetters" id="apidoc.element.warehouse.Schema.prototype._applyGetters">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_applyGetters
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_applyGetters = function (data) {
  var stack = this.stacks.getter;

  for (var i = 0, len = stack.length; i &lt; len; i++) {
    stack[i](data);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.schema = schema;
this.length = 0;

var _Document = this.Document = function(data) {
  Document.call(this, data);

  // Apply getters
  schema.<span class="apidocCodeKeywordSpan">_applyGetters</span>(this);
};

util.inherits(_Document, Document);
_Document.prototype._model = this;
_Document.prototype._schema = schema;

var _Query = this.Query = function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype._applySetters" id="apidoc.element.warehouse.Schema.prototype._applySetters">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_applySetters
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_applySetters = function (data) {
  var stack = this.stacks.setter;

  for (var i = 0, len = stack.length; i &lt; len; i++) {
    stack[i](data);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (this.has(id)) {
  return Promise.reject(new WarehouseError('ID `' + id + '` has been used', WarehouseError.ID_EXIST));
}

// Apply setters
var result = data.toObject();
schema.<span class="apidocCodeKeywordSpan">_applySetters</span>(result);

// Pre-hooks
return execHooks(schema, 'pre', 'save', data).then(function(data) {
  // Insert data
  self.data[id] = result;
  self.length++;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype._execQuery" id="apidoc.element.warehouse.Schema.prototype._execQuery">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_execQuery
        <span class="apidocSignatureSpan">(query)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_execQuery = function (query) {
  var stack = this._parseQuery(query);
  return execQueryStack(stack);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *   @param {Number} [options.limit=0] Limits the number of documents returned.
 *   @param {Number} [options.skip=0] Skips the first elements.
 *   @param {Boolean} [options.lean=false] Returns a plain JavaScript object.
 * @return {Query|Array}
 */
Model.prototype.find = function(query, options_) {
var options = options_ || {};
var filter = this.schema.<span class="apidocCodeKeywordSpan">_execQuery</span>(query);
var keys = Object.keys(this.data);
var len = keys.length;
var limit = options.limit || this.length;
var skip = options.skip;
var data = this.data;
var arr = [];
var key, item;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype._execSort" id="apidoc.element.warehouse.Schema.prototype._execSort">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_execSort
        <span class="apidocSignatureSpan">(sorts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_execSort = function (sorts) {
  var stack = this._parseSort(sorts);
  return execSortStack(stack);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {String|Object} orderby
* @param {String|Number} [order]
* @return {Query}
*/
Model.prototype.sort = function(orderby, order) {
 var sort = parseArgs(orderby, order);
 var fn = this.schema.<span class="apidocCodeKeywordSpan">_execSort</span>(sort);

 return new this.Query(this.toArray().sort(fn));
};

/**
* Returns the document at the specified index. `num` can be a positive or
* negative number.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype._exportDatabase" id="apidoc.element.warehouse.Schema.prototype._exportDatabase">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_exportDatabase
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_exportDatabase = function (data) {
  var stack = this.stacks.export;

  for (var i = 0, len = stack.length; i &lt; len; i++) {
    stack[i](data);
  }

  return data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @private
 */
Model.prototype._export = function() {
  var arr = new Array(this.length);
  var schema = this.schema;

  this.forEach(function(item, i) {
    arr[i] = schema.<span class="apidocCodeKeywordSpan">_exportDatabase</span>(item);
  }, {lean: true});

  return JSON.stringify(arr);
};

module.exports = Model;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype._parseDatabase" id="apidoc.element.warehouse.Schema.prototype._parseDatabase">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_parseDatabase
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_parseDatabase = function (data) {
  var stack = this.stacks.import;

  for (var i = 0, len = stack.length; i &lt; len; i++) {
    stack[i](data);
  }

  return data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 var len = arr.length;
 var data = this.data;
 var schema = this.schema;
 var item;

 for (var i = 0; i &lt; len; i++) {
   item = arr[i];
   data[item._id] = schema.<span class="apidocCodeKeywordSpan">_parseDatabase</span>(item);
 }

 this.length = len;
};

/**
* Exports data.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype._parseNormalQuery" id="apidoc.element.warehouse.Schema.prototype._parseNormalQuery">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_parseNormalQuery
        <span class="apidocSignatureSpan">(queries, prefix_)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_parseNormalQuery = function (queries, prefix_) {
  var prefix = prefix_ || '';
  var paths = this.paths;
  var stack = [];
  var keys = Object.keys(queries);
  var key, query, name, path, prefixNoDot;

  if (prefix) {
    prefixNoDot = prefix.substring(0, prefix.length - 1);
    path = paths[prefixNoDot];
  }

  for (var i = 0, len = keys.length; i &lt; len; i++) {
    key = keys[i];
    query = queries[key];
    name = prefix + key;

    if (key[0] === '$') {
      stack.push(queryStackOperator(path, 'q' + key, prefixNoDot, query));
    } else if (isPlainObject(query)) {
      stack = stack.concat(this._parseNormalQuery(query, name + '.'));
    } else {
      stack.push(queryStackNormal(paths[name], name, query));
    }
  }

  return stack;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    key = keys[i];
    query = queries[key];
    name = prefix + key;

    if (key[0] === '$') {
      stack.push(queryStackOperator(path, 'q' + key, prefixNoDot, query));
    } else if (isPlainObject(query)) {
      stack = stack.concat(this.<span class="apidocCodeKeywordSpan">_parseNormalQuery</span>(query, name + '.'));
    } else {
      stack.push(queryStackNormal(paths[name], name, query));
    }
  }

  return stack;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype._parsePopulate" id="apidoc.element.warehouse.Schema.prototype._parsePopulate">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_parsePopulate
        <span class="apidocSignatureSpan">(expr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_parsePopulate = function (expr) {
  var paths = this.paths;
  var arr, i, len, item, path, key, ref;

  if (typeof expr === 'string') {
    var split = expr.split(' ');
    arr = [];

    for (i = 0, len = split.length; i &lt; len; i++) {
      arr.push({
        path: split[i]
      });
    }
  } else if (isArray(expr)) {
    for (i = 0, len = expr.length; i &lt; len; i++) {
      item = expr[i];

      if (typeof item === 'string') {
        arr.push({
          path: item
        });
      } else {
        arr.push(item);
      }
    }
  } else {
    arr = [expr];
  }

  for (i = 0, len = arr.length; i &lt; len; i++) {
    item = arr[i];
    key = item.path;

    if (!key) {
      throw new PopulationError('path is required');
    }

    if (!item.model) {
      path = paths[key];
      ref = path.child ? path.child.options.ref : path.options.ref;

      if (ref) {
        item.model = ref;
      } else {
        throw new PopulationError('model is required');
      }
    }
  }

  return arr;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Populates document references.
 *
 * @param {String|Object} expr
 * @return {Document}
 */
Document.prototype.populate = function(expr) {
  var stack = this._schema.<span class="apidocCodeKeywordSpan">_parsePopulate</span>(expr);
  return this._model._populate(this, stack);
};

module.exports = Document;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype._parseQuery" id="apidoc.element.warehouse.Schema.prototype._parseQuery">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_parseQuery
        <span class="apidocSignatureSpan">(queries)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_parseQuery = function (queries) {
  var stack = [];
  var paths = this.paths;
  var keys = Object.keys(queries);
  var key, query;

  for (var i = 0, len = keys.length; i &lt; len; i++) {
    key = keys[i];
    query = queries[key];

    switch (key){
      case '$and':
        stack = stack.concat(this._parseQueryArray(query));
        break;

      case '$or':
        stack.push($or(this._parseQueryArray(query)));
        break;

      case '$nor':
        stack.push($nor(this._parseQueryArray(query)));
        break;

      case '$not':
        stack.push($not(this._parseQuery(query)));
        break;

      case '$where':
        stack.push($where(query));
        break;

      default:
        if (isPlainObject(query)) {
          stack = stack.concat(this._parseNormalQuery(query, key + '.'));
        } else {
          stack.push(queryStackNormal(paths[key], key, query));
        }
    }
  }

  return stack;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @return {Array}
* @private
*/
Schema.prototype._parseQueryArray = function(arr) {
 var stack = [];

 for (var i = 0, len = arr.length; i &lt; len; i++) {
   stack.push(execQueryStack(this.<span class="apidocCodeKeywordSpan">_parseQuery</span>(arr[i])));
 }

 return stack;
};

/**
* Parses normal query expressions and returns a stack.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype._parseQueryArray" id="apidoc.element.warehouse.Schema.prototype._parseQueryArray">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_parseQueryArray
        <span class="apidocSignatureSpan">(arr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_parseQueryArray = function (arr) {
  var stack = [];

  for (var i = 0, len = arr.length; i &lt; len; i++) {
    stack.push(execQueryStack(this._parseQuery(arr[i])));
  }

  return stack;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  for (var i = 0, len = keys.length; i &lt; len; i++) {
    key = keys[i];
    query = queries[key];

    switch (key){
case '$and':
  stack = stack.concat(this.<span class="apidocCodeKeywordSpan">_parseQueryArray</span>(query));
  break;

case '$or':
  stack.push($or(this._parseQueryArray(query)));
  break;

case '$nor':
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype._parseSort" id="apidoc.element.warehouse.Schema.prototype._parseSort">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_parseSort
        <span class="apidocSignatureSpan">(sorts, prefix_)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_parseSort = function (sorts, prefix_) {
  var prefix = prefix_ || '';
  var paths = this.paths;
  var stack = [];
  var keys = Object.keys(sorts);
  var key, sort, name;

  for (var i = 0, len = keys.length; i &lt; len; i++) {
    key = keys[i];
    sort = sorts[key];
    name = prefix + key;

    if (typeof sort === 'object') {
      stack = stack.concat(this._parseSort(sort, name + '.'));
    } else {
      stack.push(sortStack(paths[name], name, sort));
    }
  }

  return stack;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  for (var i = 0, len = keys.length; i &lt; len; i++) {
    key = keys[i];
    sort = sorts[key];
    name = prefix + key;

    if (typeof sort === 'object') {
      stack = stack.concat(this.<span class="apidocCodeKeywordSpan">_parseSort</span>(sort, name + '.'));
    } else {
      stack.push(sortStack(paths[name], name, sort));
    }
  }

  return stack;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype._parseUpdate" id="apidoc.element.warehouse.Schema.prototype._parseUpdate">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_parseUpdate
        <span class="apidocSignatureSpan">(updates, prefix_)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_parseUpdate = function (updates, prefix_) {
  var prefix = prefix_ || '';
  var paths = this.paths;
  var stack = [];
  var keys = Object.keys(updates);
  var key, update, ukey, name, path, fields, field, j, fieldLen, prefixNoDot;

  if (prefix) {
    prefixNoDot = prefix.substring(0, prefix.length - 1);
    path = paths[prefixNoDot];
  }

  for (var i = 0, len = keys.length; i &lt; len; i++) {
    key = keys[i];
    update = updates[key];
    name = prefix + key;

    // Update operators
    if (key[0] === '$') {
      ukey = 'u' + key;

      // First-class update operators
      if (prefix) {
        stack.push(updateStackOperator(path, ukey, prefixNoDot, update));
      } else { // Inline update operators
        fields = Object.keys(update);
        fieldLen = fields.length;

        for (j = 0; j &lt; fieldLen; j++) {
          field = fields[i];
          stack.push(
            updateStackOperator(paths[field], ukey, field, update[field]));
        }
      }
    } else if (isPlainObject(update)) {
      stack = stack.concat(this._parseUpdate(update, name + '.'));
    } else {
      stack.push(updateStackNormal(name, update));
    }
  }

  return stack;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {function} [callback]
* @return {Promise}
*/
Model.prototype.updateById = function(id, update, callback) {
 var self = this;

 return Promise.using(this._acquireWriteLock(), function() {
   var stack = self.schema.<span class="apidocCodeKeywordSpan">_parseUpdate</span>(update);
   return self._updateWithStack(id, stack);
 }).asCallback(callback);
};

/**
* Updates matching documents.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype._updateStack" id="apidoc.element.warehouse.Schema.prototype._updateStack">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>_updateStack
        <span class="apidocSignatureSpan">(name, type)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_updateStack = function (name, type) {
  var stacks = this.stacks;

  stacks.getter.push(function(data) {
    var value = getProp(data, name);
    var result = type.cast(value, data);

    if (result !== undefined) {
      setProp(data, name, result);
    }
  });

  stacks.setter.push(function(data) {
    var value = getProp(data, name);
    var result = type.validate(value, data);

    if (result !== undefined) {
      setProp(data, name, result);
    } else {
      delProp(data, name);
    }
  });

  stacks.import.push(function(data) {
    var value = getProp(data, name);
    var result = type.parse(value, data);

    if (result !== undefined) {
      setProp(data, name, result);
    }
  });

  stacks.export.push(function(data) {
    var value = getProp(data, name);
    var result = type.value(value, data);

    if (result !== undefined) {
      setProp(data, name, result);
    } else {
      delProp(data, name);
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

     default:
       throw new TypeError('Invalid value for schema path `' + name + '`');
   }
 }

 this.paths[name] = type;
 this.<span class="apidocCodeKeywordSpan">_updateStack</span>(name, type);

 if (nested) this.add(obj, name + '.');
};

/**
* Updates cache stacks.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype.add" id="apidoc.element.warehouse.Schema.prototype.add">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>add
        <span class="apidocSignatureSpan">(schema, prefix_)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">add = function (schema, prefix_) {
  var prefix = prefix_ || '';
  var keys = Object.keys(schema);
  var len = keys.length;
  var key, value;

  if (!len) return;

  for (var i = 0; i &lt; len; i++) {
    key = keys[i];
    value = schema[key];

    this.path(prefix + key, value);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   getter: [],
   setter: [],
   import: [],
   export: []
 };

 if (schema) {
   this.<span class="apidocCodeKeywordSpan">add</span>(schema);
 }
}

/**
* Adds paths.
*
* @param {Object} schema
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype.method" id="apidoc.element.warehouse.Schema.prototype.method">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>method
        <span class="apidocSignatureSpan">(name, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">method = function (name, fn) {
  if (!name) throw new TypeError('Method name is required!');

  if (typeof fn !== 'function') {
    throw new TypeError('Instance method must be a function!');
  }

  this.methods[name] = fn;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

function hookWrapper(fn) {
 if (fn.length &gt; 1) {
   return Promise.promisify(fn);
 }

 return Promise.<span class="apidocCodeKeywordSpan">method</span>(fn);
}

/**
* Adds a pre-hook.
*
* @param {String} type Hook type. One of `save` or `remove`.
* @param {Function} fn
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype.path" id="apidoc.element.warehouse.Schema.prototype.path">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>path
        <span class="apidocSignatureSpan">(name, obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">path = function (name, obj) {
  if (obj == null) {
    return this.paths[name];
  }

  var type;
  var nested = false;

  if (obj instanceof SchemaType) {
    type = obj;
  } else {
    switch (typeof obj){
      case 'function':
        type = getSchemaType(name, {type: obj});
        break;

      case 'object':
        if (obj.type) {
          type = getSchemaType(name, obj);
        } else if (isArray(obj)) {
          type = new Types.Array(name, {
            child: obj.length ? getSchemaType(name, obj[0]) : new SchemaType(name)
          });
        } else {
          type = new Types.Object();
          nested = Object.keys(obj).length &gt; 0;
        }

        break;

      default:
        throw new TypeError('Invalid value for schema path `' + name + '`');
    }
  }

  this.paths[name] = type;
  this._updateStack(name, type);

  if (nested) this.add(obj, name + '.');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
} else if (typeof schema_ === 'object') {
  schema = new Schema(schema_);
} else {
  schema = new Schema();
}

// Set `_id` path for schema
if (!schema.<span class="apidocCodeKeywordSpan">path</span>('_id')) {
  schema.path('_id', {type: Types.CUID, required: true});
}

this.name = name;
this.data = {};
this._mutex = new Mutex();
this.schema = schema;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype.post" id="apidoc.element.warehouse.Schema.prototype.post">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>post
        <span class="apidocSignatureSpan">(type, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">post = function (type, fn) {
  checkHookType(type);
  if (typeof fn !== 'function') throw new TypeError('Hook must be a function!');

  this.hooks.post[type].push(hookWrapper(fn));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype.pre" id="apidoc.element.warehouse.Schema.prototype.pre">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>pre
        <span class="apidocSignatureSpan">(type, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pre = function (type, fn) {
  checkHookType(type);
  if (typeof fn !== 'function') throw new TypeError('Hook must be a function!');

  this.hooks.pre[type].push(hookWrapper(fn));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype.static" id="apidoc.element.warehouse.Schema.prototype.static">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>static
        <span class="apidocSignatureSpan">(name, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">static = function (name, fn) {
  if (!name) throw new TypeError('Method name is required!');

  if (typeof fn !== 'function') {
    throw new TypeError('Static method must be a function!');
  }

  this.statics[name] = fn;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.Schema.prototype.virtual" id="apidoc.element.warehouse.Schema.prototype.virtual">
        function <span class="apidocSignatureSpan">warehouse.Schema.prototype.</span>virtual
        <span class="apidocSignatureSpan">(name, getter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">virtual = function (name, getter) {
  var virtual = new Types.Virtual(name, {});
  if (getter) virtual.get(getter);

  this.path(name, virtual);

  return virtual;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.SchemaType" id="apidoc.module.warehouse.SchemaType">module warehouse.SchemaType</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.SchemaType.SchemaType" id="apidoc.element.warehouse.SchemaType.SchemaType">
        function <span class="apidocSignatureSpan">warehouse.</span>SchemaType
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaType(name, options) {
  this.name = name || '';

  this.options = assign({
    required: false
  }, options);

  var default_ = this.options.default;

  if (typeof default_ === 'function') {
    this.default = default_;
  } else {
    this.default = function() {
      return default_;
    };
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.SchemaType.prototype" id="apidoc.module.warehouse.SchemaType.prototype">module warehouse.SchemaType.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.SchemaType.prototype.cast" id="apidoc.element.warehouse.SchemaType.prototype.cast">
        function <span class="apidocSignatureSpan">warehouse.SchemaType.prototype.</span>cast
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cast = function (value, data) {
  if (value == null) {
    return this.default();
  }

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @private
 */
Schema.prototype._updateStack = function(name, type) {
var stacks = this.stacks;

stacks.getter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">cast</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.SchemaType.prototype.compare" id="apidoc.element.warehouse.SchemaType.prototype.compare">
        function <span class="apidocSignatureSpan">warehouse.SchemaType.prototype.</span>compare
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compare = function (a, b) {
  if (a &gt; b) {
    return 1;
  } else if (a &lt; b) {
    return -1;
  }

  return 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

function sortStack(path_, key, sort) {
 var path = path_ || new SchemaType(key);
 var descending = sort === 'desc' || sort === -1;

 return function(a, b) {
   var result = path.<span class="apidocCodeKeywordSpan">compare</span>(getProp(a, key), getProp(b, key));
   return descending &amp;&amp; result ? result * -1 : result;
 };
}

/**
* Parses sorting expressions and returns a stack.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.SchemaType.prototype.match" id="apidoc.element.warehouse.SchemaType.prototype.match">
        function <span class="apidocSignatureSpan">warehouse.SchemaType.prototype.</span>match
        <span class="apidocSignatureSpan">(value, query, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">match = function (value, query, data) {
  return value === query;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return stack;
};

function queryStackNormal(path_, key, query) {
var path = path_ || new SchemaType(key);

return function(data) {
  return path.<span class="apidocCodeKeywordSpan">match</span>(getProp(data, key), query, data);
};
}

function queryStackOperator(path_, qkey, key, query) {
var path = path_ || new SchemaType(key);

return function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.SchemaType.prototype.parse" id="apidoc.element.warehouse.SchemaType.prototype.parse">
        function <span class="apidocSignatureSpan">warehouse.SchemaType.prototype.</span>parse
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (value, data) {
  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (!path) throw new WarehouseError('options.path is required');

  return new Promise(function(resolve, reject) {
    var src = fs.createReadStream(path, {encoding: 'utf8'});
    var oldVersion = 0;

    var stream = JSONStream.<span class="apidocCodeKeywordSpan">parse</span>([true, true], function(value, keys) {
      switch (keys.shift()){
        case 'meta':
if (keys.shift() === 'version') {
  oldVersion = value;
}

break;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.SchemaType.prototype.validate" id="apidoc.element.warehouse.SchemaType.prototype.validate">
        function <span class="apidocSignatureSpan">warehouse.SchemaType.prototype.</span>validate
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (value, data) {
  if (this.options.required &amp;&amp; value == null) {
    throw new ValidationError('`' + this.name + '` is required!');
  }

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.setter.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">validate</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.SchemaType.prototype.value" id="apidoc.element.warehouse.SchemaType.prototype.value">
        function <span class="apidocSignatureSpan">warehouse.SchemaType.prototype.</span>value
        <span class="apidocSignatureSpan">(value, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">value = function (value, data) {
  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (result !== undefined) {
    setProp(data, name, result);
  }
});

stacks.export.push(function(data) {
  var value = getProp(data, name);
  var result = type.<span class="apidocCodeKeywordSpan">value</span>(value, data);

  if (result !== undefined) {
    setProp(data, name, result);
  } else {
    delProp(data, name);
  }
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.array" id="apidoc.module.warehouse.array">module warehouse.array</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.array.array" id="apidoc.element.warehouse.array.array">
        function <span class="apidocSignatureSpan">warehouse.</span>array
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeArray(name, options) {
  SchemaType.call(this, name, extend({
    default: []
  }, options));

  this.child = this.options.child || new SchemaType(name);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.array.super_" id="apidoc.element.warehouse.array.super_">
        function <span class="apidocSignatureSpan">warehouse.array.</span>super_
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaType(name, options) {
  this.name = name || '';

  this.options = assign({
    required: false
  }, options);

  var default_ = this.options.default;

  if (typeof default_ === 'function') {
    this.default = default_;
  } else {
    this.default = function() {
      return default_;
    };
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.boolean" id="apidoc.module.warehouse.boolean">module warehouse.boolean</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.boolean.boolean" id="apidoc.element.warehouse.boolean.boolean">
        function <span class="apidocSignatureSpan">warehouse.</span>boolean
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeBoolean(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.boolean.super_" id="apidoc.element.warehouse.boolean.super_">
        function <span class="apidocSignatureSpan">warehouse.boolean.</span>super_
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaType(name, options) {
  this.name = name || '';

  this.options = assign({
    required: false
  }, options);

  var default_ = this.options.default;

  if (typeof default_ === 'function') {
    this.default = default_;
  } else {
    this.default = function() {
      return default_;
    };
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.buffer" id="apidoc.module.warehouse.buffer">module warehouse.buffer</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.buffer.buffer" id="apidoc.element.warehouse.buffer.buffer">
        function <span class="apidocSignatureSpan">warehouse.</span>buffer
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeBuffer(name, options) {
  SchemaType.call(this, name, assign({
    encoding: 'hex'
  }, options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.buffer.super_" id="apidoc.element.warehouse.buffer.super_">
        function <span class="apidocSignatureSpan">warehouse.buffer.</span>super_
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaType(name, options) {
  this.name = name || '';

  this.options = assign({
    required: false
  }, options);

  var default_ = this.options.default;

  if (typeof default_ === 'function') {
    this.default = default_;
  } else {
    this.default = function() {
      return default_;
    };
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.cuid" id="apidoc.module.warehouse.cuid">module warehouse.cuid</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.cuid.cuid" id="apidoc.element.warehouse.cuid.cuid">
        function <span class="apidocSignatureSpan">warehouse.</span>cuid
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeCUID(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.cuid.super_" id="apidoc.element.warehouse.cuid.super_">
        function <span class="apidocSignatureSpan">warehouse.cuid.</span>super_
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaType(name, options) {
  this.name = name || '';

  this.options = assign({
    required: false
  }, options);

  var default_ = this.options.default;

  if (typeof default_ === 'function') {
    this.default = default_;
  } else {
    this.default = function() {
      return default_;
    };
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.date" id="apidoc.module.warehouse.date">module warehouse.date</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.date.date" id="apidoc.element.warehouse.date.date">
        function <span class="apidocSignatureSpan">warehouse.</span>date
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeDate(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.date.super_" id="apidoc.element.warehouse.date.super_">
        function <span class="apidocSignatureSpan">warehouse.date.</span>super_
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaType(name, options) {
  this.name = name || '';

  this.options = assign({
    required: false
  }, options);

  var default_ = this.options.default;

  if (typeof default_ === 'function') {
    this.default = default_;
  } else {
    this.default = function() {
      return default_;
    };
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.document" id="apidoc.module.warehouse.document">module warehouse.document</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.document.document" id="apidoc.element.warehouse.document.document">
        function <span class="apidocSignatureSpan">warehouse.</span>document
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Document(data) {
  if (data) {
    var keys = Object.keys(data);
    var key;

    for (var i = 0, len = keys.length; i &lt; len; i++) {
      key = keys[i];
      this[key] = data[key];
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.document.prototype" id="apidoc.module.warehouse.document.prototype">module warehouse.document.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.document.prototype.populate" id="apidoc.element.warehouse.document.prototype.populate">
        function <span class="apidocSignatureSpan">warehouse.document.prototype.</span>populate
        <span class="apidocSignatureSpan">(expr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">populate = function (expr) {
  var stack = this._schema._parsePopulate(expr);
  return this._model._populate(this, stack);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.document.prototype.remove" id="apidoc.element.warehouse.document.prototype.remove">
        function <span class="apidocSignatureSpan">warehouse.document.prototype.</span>remove
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (callback) {
  return this._model.removeById(this._id, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Removes matching documents.
 *
 * @param {object} query
 * @param {object} [callback]
 * @return {Promise}
 */
Model.prototype.remove = function(query, callback) {
return this.find(query).<span class="apidocCodeKeywordSpan">remove</span>(callback);
};

/**
 * Deletes a model.
 */
Model.prototype.destroy = function() {
this._database._models[this.name] = null;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.document.prototype.replace" id="apidoc.element.warehouse.document.prototype.replace">
        function <span class="apidocSignatureSpan">warehouse.document.prototype.</span>replace
        <span class="apidocSignatureSpan">(data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">replace = function (data, callback) {
  return this._model.replaceById(this._id, data, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {object} query
* @param {object} data
* @param {function} [callback]
* @return {Promise}
*/
Model.prototype.replace = function(query, data, callback) {
 return this.find(query).<span class="apidocCodeKeywordSpan">replace</span>(data, callback);
};

/**
* Finds a document by its identifier and remove it.
*
* @param {*} id
* @param {function} [callback]
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.document.prototype.save" id="apidoc.element.warehouse.document.prototype.save">
        function <span class="apidocSignatureSpan">warehouse.document.prototype.</span>save
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">save = function (callback) {
  return this._model.save(this, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Saves the document.
*
* @param {function} [callback]
* @return {Promise}
*/
Document.prototype.save = function(callback) {
 return this._model.<span class="apidocCodeKeywordSpan">save</span>(this, callback);
};

/**
* Updates the document.
*
* @param {object} data
* @param {function} [callback]
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.document.prototype.toObject" id="apidoc.element.warehouse.document.prototype.toObject">
        function <span class="apidocSignatureSpan">warehouse.document.prototype.</span>toObject
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toObject = function () {
  var keys = Object.keys(this);
  var obj = {};
  var key;

  for (var i = 0, len = keys.length; i &lt; len; i++) {
    key = keys[i];
    // Don't deep clone getters in order to avoid "Maximum call stack size
    // exceeded" error
    obj[key] = isGetter(this, key) ? this[key] : _.cloneDeep(this[key]);
  }

  return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

if (this.has(id)) {
  return Promise.reject(new WarehouseError('ID `' + id + '` has been used', WarehouseError.ID_EXIST));
}

// Apply setters
var result = data.<span class="apidocCodeKeywordSpan">toObject</span>();
schema._applySetters(result);

// Pre-hooks
return execHooks(schema, 'pre', 'save', data).then(function(data) {
  // Insert data
  self.data[id] = result;
  self.length++;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.document.prototype.toString" id="apidoc.element.warehouse.document.prototype.toString">
        function <span class="apidocSignatureSpan">warehouse.document.prototype.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
  return JSON.stringify(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* Transforms data into number to compress the size of database files.
*
* @param {Buffer} value
* @param {Object} data
* @return {Number}
*/
SchemaTypeBuffer.prototype.value = function(value, data) {
 return Buffer.isBuffer(value) ? value.<span class="apidocCodeKeywordSpan">toString</span>(this.options.encoding) : value;
};

/**
* Checks the equality of data.
*
* @param {Buffer} value
* @param {Buffer} query
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.document.prototype.update" id="apidoc.element.warehouse.document.prototype.update">
        function <span class="apidocSignatureSpan">warehouse.document.prototype.</span>update
        <span class="apidocSignatureSpan">(data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (data, callback) {
  return this._model.updateById(this._id, data, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {object} query
* @param {object} data
* @param {function} [callback]
* @return {Promise}
*/
Model.prototype.update = function(query, data, callback) {
 return this.find(query).<span class="apidocCodeKeywordSpan">update</span>(data, callback);
};

/**
* Finds a document by its identifier and replace it.
*
* @param {*} id
* @param  {object} data
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.enum" id="apidoc.module.warehouse.enum">module warehouse.enum</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.enum.enum" id="apidoc.element.warehouse.enum.enum">
        function <span class="apidocSignatureSpan">warehouse.</span>enum
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeEnum(name, options) {
  SchemaType.call(this, name, assign({
    elements: []
  }, options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.enum.super_" id="apidoc.element.warehouse.enum.super_">
        function <span class="apidocSignatureSpan">warehouse.enum.</span>super_
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaType(name, options) {
  this.name = name || '';

  this.options = assign({
    required: false
  }, options);

  var default_ = this.options.default;

  if (typeof default_ === 'function') {
    this.default = default_;
  } else {
    this.default = function() {
      return default_;
    };
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.error" id="apidoc.module.warehouse.error">module warehouse.error</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.error.error" id="apidoc.element.warehouse.error.error">
        function <span class="apidocSignatureSpan">warehouse.</span>error
        <span class="apidocSignatureSpan">(msg, code)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WarehouseError(msg, code) {
  Error.call(this);

  if (Error.captureStackTrace) {
    Error.captureStackTrace(this);
  } else {
    this.stack = new Error().stack;
  }

  this.name = 'WarehouseError';
  this.message = msg;
  this.code = code;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.error.super_" id="apidoc.element.warehouse.error.super_">
        function <span class="apidocSignatureSpan">warehouse.error.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Error() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.integer" id="apidoc.module.warehouse.integer">module warehouse.integer</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.integer.integer" id="apidoc.element.warehouse.integer.integer">
        function <span class="apidocSignatureSpan">warehouse.</span>integer
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeInteger(name, options) {
  SchemaTypeNumber.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.integer.super_" id="apidoc.element.warehouse.integer.super_">
        function <span class="apidocSignatureSpan">warehouse.integer.</span>super_
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeNumber(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.model" id="apidoc.module.warehouse.model">module warehouse.model</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.model.model" id="apidoc.element.warehouse.model.model">
        function <span class="apidocSignatureSpan">warehouse.</span>model
        <span class="apidocSignatureSpan">(name, schema_)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Model(name, schema_) {
  EventEmitter.call(this);

  var schema, i, len, key;

  // Define schema
  if (schema_ instanceof Schema) {
    schema = schema_;
  } else if (typeof schema_ === 'object') {
    schema = new Schema(schema_);
  } else {
    schema = new Schema();
  }

  // Set `_id` path for schema
  if (!schema.path('_id')) {
    schema.path('_id', {type: Types.CUID, required: true});
  }

  this.name = name;
  this.data = {};
  this._mutex = new Mutex();
  this.schema = schema;
  this.length = 0;

  var _Document = this.Document = function(data) {
    Document.call(this, data);

    // Apply getters
    schema._applyGetters(this);
  };

  util.inherits(_Document, Document);
  _Document.prototype._model = this;
  _Document.prototype._schema = schema;

  var _Query = this.Query = function(data) {
    Query.call(this, data);
  };

  util.inherits(_Query, Query);
  _Query.prototype._model = this;
  _Query.prototype._schema = schema;

  // Apply static methods
  var statics = schema.statics;
  var staticKeys = Object.keys(statics);

  for (i = 0, len = staticKeys.length; i &lt; len; i++) {
    key = staticKeys[i];
    this[key] = statics[key];
  }

  // Apply instance methods
  var methods = schema.methods;
  var methodKeys = Object.keys(methods);

  for (i = 0, len = methodKeys.length; i &lt; len; i++) {
    key = methodKeys[i];
    _Document.prototype[key] = methods[key];
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

## Usage

``` js
var Database = require('warehouse');
var db = new Database();

var Post = db.<span class="apidocCodeKeywordSpan">model</span>('posts', {
  title: String,
  created: {type: Date, default: Date.now}
});

Post.insert({
  title: 'Hello world'
}).then(function(post){
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.super_" id="apidoc.element.warehouse.model.super_">
        function <span class="apidocSignatureSpan">warehouse.model.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.model.prototype" id="apidoc.module.warehouse.model.prototype">module warehouse.model.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.model.prototype._acquireWriteLock" id="apidoc.element.warehouse.model.prototype._acquireWriteLock">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_acquireWriteLock
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_acquireWriteLock = function (id) {
  var mutex = this._mutex;

  return new Promise(function(resolve, reject) {
    mutex.lock(resolve);
  }).disposer(function() {
    mutex.unlock();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {object} data
* @param {function} [callback]
* @return {Promise}
*/
Model.prototype.insertOne = function(data, callback) {
 var self = this;

 return Promise.using(this.<span class="apidocCodeKeywordSpan">_acquireWriteLock</span>(), function() {
   return self._insertOne(data);
 }).asCallback(callback);
};

/**
* Inserts documents.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype._export" id="apidoc.element.warehouse.model.prototype._export">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_export
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_export = function () {
  var arr = new Array(this.length);
  var schema = this.schema;

  this.forEach(function(item, i) {
    arr[i] = schema._exportDatabase(item);
  }, {lean: true});

  return JSON.stringify(arr);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
for (var i = 0, len = keys.length; i &lt; len; i++) {
  key = keys[i];
  model = models[key];

  if (!model) continue;

  if (i) stream.write(',');
  stream.write('"' + key + '":' + model.<span class="apidocCodeKeywordSpan">_export</span>());
}

stream.write('}');

// End
stream.end('}');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype._import" id="apidoc.element.warehouse.model.prototype._import">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_import
        <span class="apidocSignatureSpan">(arr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_import = function (arr) {
  var len = arr.length;
  var data = this.data;
  var schema = this.schema;
  var item;

  for (var i = 0; i &lt; len; i++) {
    item = arr[i];
    data[item._id] = schema._parseDatabase(item);
  }

  this.length = len;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      if (keys.shift() === 'version') {
        oldVersion = value;
      }

      break;

    case 'models':
      self.model(keys.shift()).<span class="apidocCodeKeywordSpan">_import</span>(value);
      break;
  }
});

src
  .pipe(stream)
  .on('error', reject)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype._insertOne" id="apidoc.element.warehouse.model.prototype._insertOne">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_insertOne
        <span class="apidocSignatureSpan">(data_)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_insertOne = function (data_) {
  var self = this;
  var schema = this.schema;

  // Apply getters
  var data = data_ instanceof self.Document ? data_ : self.new(data_);
  var id = data._id;

  // Check ID
  if (!id) {
    return Promise.reject(new WarehouseError('ID is not defined', WarehouseError.ID_UNDEFINED));
  }

  if (this.has(id)) {
    return Promise.reject(new WarehouseError('ID `' + id + '` has been used', WarehouseError.ID_EXIST));
  }

  // Apply setters
  var result = data.toObject();
  schema._applySetters(result);

  // Pre-hooks
  return execHooks(schema, 'pre', 'save', data).then(function(data) {
    // Insert data
    self.data[id] = result;
    self.length++;

    self.emit('insert', data);
    return execHooks(schema, 'post', 'save', data);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {function} [callback]
* @return {Promise}
*/
Model.prototype.insertOne = function(data, callback) {
 var self = this;

 return Promise.using(this._acquireWriteLock(), function() {
   return self.<span class="apidocCodeKeywordSpan">_insertOne</span>(data);
 }).asCallback(callback);
};

/**
* Inserts documents.
*
* @param {object|array} data
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype._populate" id="apidoc.element.warehouse.model.prototype._populate">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_populate
        <span class="apidocSignatureSpan">(data, stack)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_populate = function (data, stack) {
  var models = this._database._models;
  var item, model, path, prop;

  for (var i = 0, len = stack.length; i &lt; len; i++) {
    item = stack[i];
    model = models[item.model];

    if (!model) {
      throw new PopulationError('Model `' + item.model + '` does not exist');
    }

    path = item.path;
    prop = getProp(data, path);

    if (isArray(prop)) {
      setGetter(data, path, this._populateGetterArray(prop, model, item));
    } else {
      setGetter(data, path, this._populateGetter(prop, model, item));
    }
  }

  return data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Populates document references.
 *
 * @param {String|Object} expr
 * @return {Document}
 */
Document.prototype.populate = function(expr) {
  var stack = this._schema._parsePopulate(expr);
  return this._model.<span class="apidocCodeKeywordSpan">_populate</span>(this, stack);
};

module.exports = Document;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype._populateGetter" id="apidoc.element.warehouse.model.prototype._populateGetter">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_populateGetter
        <span class="apidocSignatureSpan">(data, model, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_populateGetter = function (data, model, options) {
  var hasCache = false;
  var cache;

  return function() {
    if (!hasCache) {
      cache = model.findById(data);
      hasCache = true;
    }

    return cache;
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    path = item.path;
    prop = getProp(data, path);

    if (isArray(prop)) {
      setGetter(data, path, this._populateGetterArray(prop, model, item));
    } else {
      setGetter(data, path, this.<span class="apidocCodeKeywordSpan">_populateGetter</span>(prop, model, item));
    }
  }

  return data;
};

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype._populateGetterArray" id="apidoc.element.warehouse.model.prototype._populateGetterArray">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_populateGetterArray
        <span class="apidocSignatureSpan">(data, model, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_populateGetterArray = function (data, model, options) {
  var Query = model.Query;
  var hasCache = false;
  var cache;

  return function() {
    if (!hasCache) {
      var arr = [];

      for (var i = 0, len = data.length; i &lt; len; i++) {
        arr.push(model.findById(data[i]));
      }

      if (options.match) {
        cache = new Query(arr).find(options.match, options);
      } else if (options.skip) {
        if (options.limit) {
          arr = arr.slice(options.skip, options.skip + options.limit);
        } else {
          arr = arr.slice(options.skip);
        }

        cache = new Query(arr);
      } else if (options.limit) {
        cache = new Query(arr.slice(0, options.limit));
      } else {
        cache = new Query(arr);
      }

      if (options.sort) {
        cache = cache.sort(options.sort);
      }

      hasCache = true;
    }

    return cache;
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      throw new PopulationError('Model `' + item.model + '` does not exist');
    }

    path = item.path;
    prop = getProp(data, path);

    if (isArray(prop)) {
      setGetter(data, path, this.<span class="apidocCodeKeywordSpan">_populateGetterArray</span>(prop, model, item));
    } else {
      setGetter(data, path, this._populateGetter(prop, model, item));
    }
  }

  return data;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype._removeById" id="apidoc.element.warehouse.model.prototype._removeById">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_removeById
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_removeById = function (id) {
  var self = this;
  var schema = this.schema;

  var data = this.data[id];

  if (!data) {
    return Promise.reject(new WarehouseError('ID `' + id + '` does not exist', WarehouseError.ID_NOT_EXIST));
  }

  // Pre-hooks
  return execHooks(schema, 'pre', 'remove', data).then(function(data) {
    // Remove data
    self.data[id] = null;
    self.length--;

    self.emit('remove', data);
    return execHooks(schema, 'post', 'remove', data);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {function} [callback]
* @return {Promise}
*/
Model.prototype.removeById = function(id, callback) {
 var self = this;

 return Promise.using(this._acquireWriteLock(), function() {
   return self.<span class="apidocCodeKeywordSpan">_removeById</span>(id);
 }).asCallback(callback);
};

/**
* Removes matching documents.
*
* @param {object} query
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype._replaceById" id="apidoc.element.warehouse.model.prototype._replaceById">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_replaceById
        <span class="apidocSignatureSpan">(id, data_)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_replaceById = function (id, data_) {
  var self = this;
  var schema = this.schema;

  if (!this.has(id)) {
    return Promise.reject(new WarehouseError('ID `' + id + '` does not exist', WarehouseError.ID_NOT_EXIST));
  }

  data_._id = id;

  // Apply getters
  var data = data instanceof self.Document ? data_ : self.new(data_);

  // Apply setters
  var result = data.toObject();
  schema._applySetters(result);

  // Pre-hooks
  return execHooks(schema, 'pre', 'save', data).then(function(data) {
    // Replace data
    self.data[id] = result;

    self.emit('update', data);
    return execHooks(schema, 'post', 'save', data);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  var id = data._id;
  var self = this;

  if (!id) return this.insertOne(data, callback);

  return Promise.using(this._acquireWriteLock(), function() {
    if (self.has(id)) {
      return self.<span class="apidocCodeKeywordSpan">_replaceById</span>(id, data);
    }

    return self._insertOne(data);
  }).asCallback(callback);
};

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype._updateWithStack" id="apidoc.element.warehouse.model.prototype._updateWithStack">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>_updateWithStack
        <span class="apidocSignatureSpan">(id, stack)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_updateWithStack = function (id, stack) {
  var self = this;
  var schema = self.schema;

  var data = self.data[id];

  if (!data) {
    return Promise.reject(new WarehouseError('ID `' + id + '` does not exist', WarehouseError.ID_NOT_EXIST));
  }

  // Clone data
  var result = _.cloneDeep(data);

  // Update
  for (var i = 0, len = stack.length; i &lt; len; i++) {
    stack[i](result);
  }

  // Apply getters
  var doc = self.new(result);

  // Apply setters
  result = doc.toObject();
  schema._applySetters(result);

  // Pre-hooks
  return execHooks(schema, 'pre', 'save', doc).then(function(data) {
    // Update data
    self.data[id] = result;

    self.emit('update', data);
    return execHooks(schema, 'post', 'save', data);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @return {Promise}
*/
Model.prototype.updateById = function(id, update, callback) {
 var self = this;

 return Promise.using(this._acquireWriteLock(), function() {
   var stack = self.schema._parseUpdate(update);
   return self.<span class="apidocCodeKeywordSpan">_updateWithStack</span>(id, stack);
 }).asCallback(callback);
};

/**
* Updates matching documents.
*
* @param {object} query
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.count" id="apidoc.element.warehouse.model.prototype.count">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>count
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">count = function () {
  return this.length;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.destroy" id="apidoc.element.warehouse.model.prototype.destroy">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>destroy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function () {
  this._database._models[this.name] = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.each" id="apidoc.element.warehouse.model.prototype.each">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>each
        <span class="apidocSignatureSpan">(iterator, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">each = function (iterator, options) {
  var keys = Object.keys(this.data);
  var num = 0;
  var data;

  for (var i = 0, len = keys.length; i &lt; len; i++) {
    data = this.findById(keys[i], options);
    if (data) iterator(data, num++);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 return Boolean(this.data[id]);
};

function execHooks(schema, type, event, data) {
 var hooks = schema.hooks[type][event];
 if (!hooks.length) return Promise.resolve(data);

 return Promise.<span class="apidocCodeKeywordSpan">each</span>(hooks, function(hook) {
   return hook(data);
 }).thenReturn(data);
}

/**
* Acquires write lock.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.eq" id="apidoc.element.warehouse.model.prototype.eq">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>eq
        <span class="apidocSignatureSpan">(i_, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">eq = function (i_, options) {
  var index = i_ &lt; 0 ? this.length + i_ : i_;
  var data = this.data;
  var keys = Object.keys(data);
  var key, item;

  for (var i = 0, len = keys.length; i &lt; len; i++) {
    key = keys[i];
    item = data[key];

    if (!item) continue;

    if (index) {
      index--;
    } else {
      return this.findById(key, options);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Returns the first document.
*
* @param {Object} [options] See {@link Model#findById}.
* @return {Document|Object}
*/
Model.prototype.first = function(options) {
 return this.<span class="apidocCodeKeywordSpan">eq</span>(0, options);
};

/**
* Returns the last document.
*
* @param {Object} [options] See {@link Model#findById}.
* @return {Document|Object}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.every" id="apidoc.element.warehouse.model.prototype.every">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>every
        <span class="apidocSignatureSpan">(iterator)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">every = function (iterator) {
  var keys = Object.keys(this.data);
  var len = keys.length;
  var num = 0;
  var data;

  if (!len) return true;

  for (var i = 0; i &lt; len; i++) {
    data = this.findById(keys[i]);

    if (data) {
      if (!iterator(data, num++)) return false;
    }
  }

  return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.filter" id="apidoc.element.warehouse.model.prototype.filter">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>filter
        <span class="apidocSignatureSpan">(iterator, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">filter = function (iterator, options) {
  var arr = [];

  this.forEach(function(item, i) {
    if (iterator(item, i)) arr.push(item);
  }, options);

  return new this.Query(arr);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.find" id="apidoc.element.warehouse.model.prototype.find">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>find
        <span class="apidocSignatureSpan">(query, options_)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">find = function (query, options_) {
  var options = options_ || {};
  var filter = this.schema._execQuery(query);
  var keys = Object.keys(this.data);
  var len = keys.length;
  var limit = options.limit || this.length;
  var skip = options.skip;
  var data = this.data;
  var arr = [];
  var key, item;

  for (var i = 0; limit &amp;&amp; i &lt; len; i++) {
    key = keys[i];
    item = data[key];

    if (item &amp;&amp; filter(item)) {
      if (skip) {
        skip--;
      } else {
        arr.push(this.findById(key, options));
        limit--;
      }
    }
  }

  return options.lean ? arr : new this.Query(arr);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {object} query
* @param {object} data
* @param {function} [callback]
* @return {Promise}
*/
Model.prototype.update = function(query, data, callback) {
 return this.<span class="apidocCodeKeywordSpan">find</span>(query).update(data, callback);
};

/**
* Finds a document by its identifier and replace it.
*
* @param {*} id
* @param  {object} data
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.findById" id="apidoc.element.warehouse.model.prototype.findById">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>findById
        <span class="apidocSignatureSpan">(id, options_)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findById = function (id, options_) {
  var raw = this.data[id];
  if (!raw) return;

  var options = extend({
    lean: false
  }, options_);

  var data = _.cloneDeep(raw);
  return options.lean ? data : this.new(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */
Model.prototype.forEach = function(iterator, options) {
  var keys = Object.keys(this.data);
  var num = 0;
  var data;

  for (var i = 0, len = keys.length; i &lt; len; i++) {
    data = this.<span class="apidocCodeKeywordSpan">findById</span>(keys[i], options);
    if (data) iterator(data, num++);
  }
};

Model.prototype.each = Model.prototype.forEach;

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.findOne" id="apidoc.element.warehouse.model.prototype.findOne">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>findOne
        <span class="apidocSignatureSpan">(query, options_)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findOne = function (query, options_) {
  var options = options_ || {};
  options.limit = 1;

  var result = this.find(query, options);
  return options.lean ? result[0] : result.data[0];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.first" id="apidoc.element.warehouse.model.prototype.first">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>first
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">first = function (options) {
  return this.eq(0, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.forEach" id="apidoc.element.warehouse.model.prototype.forEach">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>forEach
        <span class="apidocSignatureSpan">(iterator, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forEach = function (iterator, options) {
  var keys = Object.keys(this.data);
  var num = 0;
  var data;

  for (var i = 0, len = keys.length; i &lt; len; i++) {
    data = this.findById(keys[i], options);
    if (data) iterator(data, num++);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *
 * @param {Object} [options] See {@link Model#findById}.
 * @return {Array}
 */
Model.prototype.toArray = function(options) {
  var result = new Array(this.length);

  this.<span class="apidocCodeKeywordSpan">forEach</span>(function(item, i) {
    result[i] = item;
  }, options);

  return result;
};

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.get" id="apidoc.element.warehouse.model.prototype.get">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>get
        <span class="apidocSignatureSpan">(id, options_)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (id, options_) {
  var raw = this.data[id];
  if (!raw) return;

  var options = extend({
    lean: false
  }, options_);

  var data = _.cloneDeep(raw);
  return options.lean ? data : this.new(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *
 * @param {String} name
 * @param {Function} [getter]
 * @return {SchemaType.Virtual}
 */
Schema.prototype.virtual = function(name, getter) {
  var virtual = new Types.Virtual(name, {});
  if (getter) virtual.<span class="apidocCodeKeywordSpan">get</span>(getter);

  this.path(name, virtual);

  return virtual;
};

function checkHookType(type) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.has" id="apidoc.element.warehouse.model.prototype.has">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>has
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">has = function (id) {
  return Boolean(this.data[id]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var id = data._id;

// Check ID
if (!id) {
  return Promise.reject(new WarehouseError('ID is not defined', WarehouseError.ID_UNDEFINED));
}

if (this.<span class="apidocCodeKeywordSpan">has</span>(id)) {
  return Promise.reject(new WarehouseError('ID `' + id + '` has been used', WarehouseError.ID_EXIST));
}

// Apply setters
var result = data.toObject();
schema._applySetters(result);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.insert" id="apidoc.element.warehouse.model.prototype.insert">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>insert
        <span class="apidocSignatureSpan">(data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insert = function (data, callback) {
  if (isArray(data)) {
    var self = this;

    return Promise.mapSeries(data, function(item) {
      return self.insertOne(item);
    }).asCallback(callback);
  }

  return this.insertOne(data, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var db = new Database();

var Post = db.model('posts', {
  title: String,
  created: {type: Date, default: Date.now}
});

Post.<span class="apidocCodeKeywordSpan">insert</span>({
  title: 'Hello world'
}).then(function(post){
  console.log(post);
});
```

- [API](http://tommy351.github.io/warehouse/)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.insertOne" id="apidoc.element.warehouse.model.prototype.insertOne">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>insertOne
        <span class="apidocSignatureSpan">(data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertOne = function (data, callback) {
  var self = this;

  return Promise.using(this._acquireWriteLock(), function() {
    return self._insertOne(data);
  }).asCallback(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @return {Promise}
 */
Model.prototype.insert = function(data, callback) {
  if (isArray(data)) {
    var self = this;

    return Promise.mapSeries(data, function(item) {
      return self.<span class="apidocCodeKeywordSpan">insertOne</span>(item);
    }).asCallback(callback);
  }

  return this.insertOne(data, callback);
};

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.last" id="apidoc.element.warehouse.model.prototype.last">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>last
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">last = function (options) {
  return this.eq(-1, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.limit" id="apidoc.element.warehouse.model.prototype.limit">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>limit
        <span class="apidocSignatureSpan">(i)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">limit = function (i) {
  return this.slice(0, i);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.map" id="apidoc.element.warehouse.model.prototype.map">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>map
        <span class="apidocSignatureSpan">(iterator, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">map = function (iterator, options) {
  var result = new Array(this.length);

  this.forEach(function(item, i) {
    result[i] = iterator(item, i);
  }, options);

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {Object} data
* @param {Function} [callback]
* @return {Promise}
*/
Query.prototype.replace = function(data, callback) {
 var model = this._model;

 return Promise.<span class="apidocCodeKeywordSpan">map</span>(this.data, function(item) {
   return model.replaceById(item._id, data);
 }).asCallback(callback);
};

/**
* Remove all documents.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.new" id="apidoc.element.warehouse.model.prototype.new">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>new
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">new = function (data) {
  return new this.Document(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 if (!raw) return;

 var options = extend({
   lean: false
 }, options_);

 var data = _.cloneDeep(raw);
 return options.lean ? data : this.<span class="apidocCodeKeywordSpan">new</span>(data);
};

Model.prototype.get = Model.prototype.findById;

/**
* Checks if the model contains a document with the specified id.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.populate" id="apidoc.element.warehouse.model.prototype.populate">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>populate
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">populate = function (path) {
  if (!path) throw new TypeError('path is required');

  var stack = this.schema._parsePopulate(path);
  var arr = new Array(this.length);
  var self = this;

  this.forEach(function(item, i) {
    arr[i] = self._populate(item, stack);
  });

  return new Query(arr);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.random" id="apidoc.element.warehouse.model.prototype.random">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>random
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">random = function () {
  return new this.Query(shuffle(this.toArray()));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.reduce" id="apidoc.element.warehouse.model.prototype.reduce">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>reduce
        <span class="apidocSignatureSpan">(iterator, initial)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reduce = function (iterator, initial) {
  var arr = this.toArray();
  var len = this.length;
  var i, result;

  if (initial === undefined) {
    i = 1;
    result = arr[0];
  } else {
    i = 0;
    result = initial;
  }

  for (; i &lt; len; i++) {
    result = iterator(result, arr[i], i);
  }

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.reduceRight" id="apidoc.element.warehouse.model.prototype.reduceRight">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>reduceRight
        <span class="apidocSignatureSpan">(iterator, initial)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reduceRight = function (iterator, initial) {
  var arr = this.toArray();
  var len = this.length;
  var i, result;

  if (initial === undefined) {
    i = len - 2;
    result = arr[len - 1];
  } else {
    i = len - 1;
    result = initial;
  }

  for (; i &gt;= 0; i--) {
    result = iterator(result, arr[i], i);
  }

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.remove" id="apidoc.element.warehouse.model.prototype.remove">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>remove
        <span class="apidocSignatureSpan">(query, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (query, callback) {
  return this.find(query).remove(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Removes matching documents.
 *
 * @param {object} query
 * @param {object} [callback]
 * @return {Promise}
 */
Model.prototype.remove = function(query, callback) {
return this.find(query).<span class="apidocCodeKeywordSpan">remove</span>(callback);
};

/**
 * Deletes a model.
 */
Model.prototype.destroy = function() {
this._database._models[this.name] = null;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.removeById" id="apidoc.element.warehouse.model.prototype.removeById">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>removeById
        <span class="apidocSignatureSpan">(id, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeById = function (id, callback) {
  var self = this;

  return Promise.using(this._acquireWriteLock(), function() {
    return self._removeById(id);
  }).asCallback(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Removes the document.
*
* @param {function} [callback]
* @return {Promise}
*/
Document.prototype.remove = function(callback) {
 return this._model.<span class="apidocCodeKeywordSpan">removeById</span>(this._id, callback);
};

/**
* Returns a plain JavaScript object.
*
* @return {object}
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.replace" id="apidoc.element.warehouse.model.prototype.replace">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>replace
        <span class="apidocSignatureSpan">(query, data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">replace = function (query, data, callback) {
  return this.find(query).replace(data, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {object} query
* @param {object} data
* @param {function} [callback]
* @return {Promise}
*/
Model.prototype.replace = function(query, data, callback) {
 return this.find(query).<span class="apidocCodeKeywordSpan">replace</span>(data, callback);
};

/**
* Finds a document by its identifier and remove it.
*
* @param {*} id
* @param {function} [callback]
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.replaceById" id="apidoc.element.warehouse.model.prototype.replaceById">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>replaceById
        <span class="apidocSignatureSpan">(id, data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">replaceById = function (id, data, callback) {
  var self = this;

  return Promise.using(this._acquireWriteLock(), function() {
    return self._replaceById(id, data);
  }).asCallback(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* Replaces the document.
*
* @param {object} data
* @param {function} [callback]
* @return {Promise}
*/
Document.prototype.replace = function(data, callback) {
 return this._model.<span class="apidocCodeKeywordSpan">replaceById</span>(this._id, data, callback);
};

/**
* Removes the document.
*
* @param {function} [callback]
* @return {Promise}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.reverse" id="apidoc.element.warehouse.model.prototype.reverse">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>reverse
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reverse = function () {
  return new this.Query(reverse(this.toArray()));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.save" id="apidoc.element.warehouse.model.prototype.save">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>save
        <span class="apidocSignatureSpan">(data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">save = function (data, callback) {
  var id = data._id;
  var self = this;

  if (!id) return this.insertOne(data, callback);

  return Promise.using(this._acquireWriteLock(), function() {
    if (self.has(id)) {
      return self._replaceById(id, data);
    }

    return self._insertOne(data);
  }).asCallback(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Saves the document.
*
* @param {function} [callback]
* @return {Promise}
*/
Document.prototype.save = function(callback) {
 return this._model.<span class="apidocCodeKeywordSpan">save</span>(this, callback);
};

/**
* Updates the document.
*
* @param {object} data
* @param {function} [callback]
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.shuffle" id="apidoc.element.warehouse.model.prototype.shuffle">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>shuffle
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">shuffle = function () {
  return new this.Query(shuffle(this.toArray()));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.size" id="apidoc.element.warehouse.model.prototype.size">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>size
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">size = function () {
  return this.length;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.skip" id="apidoc.element.warehouse.model.prototype.skip">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>skip
        <span class="apidocSignatureSpan">(i)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">skip = function (i) {
  return this.slice(i);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.slice" id="apidoc.element.warehouse.model.prototype.slice">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>slice
        <span class="apidocSignatureSpan">(start_, end_)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">slice = function (start_, end_) {
  var total = this.length;

  var start = start_ | 0;
  if (start &lt; 0) start += total;
  if (start &gt; total - 1) return new this.Query([]);

  var end = end_ | 0 || total;
  if (end &lt; 0) end += total;

  var len = start &gt; end ? 0 : end - start;
  if (len &gt; total) len = total - start;
  if (!len) return new this.Query([]);

  var arr = new Array(len);
  var keys = Object.keys(this.data);
  var keysLen = keys.length;
  var num = 0;
  var data;

  for (var i = 0; num &lt; len &amp;&amp; i &lt; keysLen; i++) {
    data = this.findById(keys[i]);
    if (!data) continue;

    if (start) {
      start--;
    } else {
      arr[num++] = data;
    }
  }

  return new this.Query(arr);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Limits the number of documents returned.
*
* @param {Number} i
* @return {Query}
*/
Model.prototype.limit = function(i) {
 return this.<span class="apidocCodeKeywordSpan">slice</span>(0, i);
};

/**
* Specifies the number of items to skip.
*
* @param {Number} i
* @return {Query}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.some" id="apidoc.element.warehouse.model.prototype.some">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>some
        <span class="apidocSignatureSpan">(iterator)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">some = function (iterator) {
  var keys = Object.keys(this.data);
  var len = keys.length;
  var num = 0;
  var data;

  if (!len) return false;

  for (var i = 0; i &lt; len; i++) {
    data = this.findById(keys[i]);

    if (data) {
      if (iterator(data, num++)) return true;
    }
  }

  return false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.sort" id="apidoc.element.warehouse.model.prototype.sort">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>sort
        <span class="apidocSignatureSpan">(orderby, order)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sort = function (orderby, order) {
  var sort = parseArgs(orderby, order);
  var fn = this.schema._execSort(sort);

  return new this.Query(this.toArray().sort(fn));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {String|Number} [order]
* @return {Query}
*/
Model.prototype.sort = function(orderby, order) {
 var sort = parseArgs(orderby, order);
 var fn = this.schema._execSort(sort);

 return new this.Query(this.toArray().<span class="apidocCodeKeywordSpan">sort</span>(fn));
};

/**
* Returns the document at the specified index. `num` can be a positive or
* negative number.
*
* @param {Number} i
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.toArray" id="apidoc.element.warehouse.model.prototype.toArray">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>toArray
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toArray = function (options) {
  var result = new Array(this.length);

  this.forEach(function(item, i) {
    result[i] = item;
  }, options);

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {String|Number} [order]
* @return {Query}
*/
Model.prototype.sort = function(orderby, order) {
 var sort = parseArgs(orderby, order);
 var fn = this.schema._execSort(sort);

 return new this.Query(this.<span class="apidocCodeKeywordSpan">toArray</span>().sort(fn));
};

/**
* Returns the document at the specified index. `num` can be a positive or
* negative number.
*
* @param {Number} i
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.update" id="apidoc.element.warehouse.model.prototype.update">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>update
        <span class="apidocSignatureSpan">(query, data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (query, data, callback) {
  return this.find(query).update(data, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {object} query
* @param {object} data
* @param {function} [callback]
* @return {Promise}
*/
Model.prototype.update = function(query, data, callback) {
 return this.find(query).<span class="apidocCodeKeywordSpan">update</span>(data, callback);
};

/**
* Finds a document by its identifier and replace it.
*
* @param {*} id
* @param  {object} data
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.model.prototype.updateById" id="apidoc.element.warehouse.model.prototype.updateById">
        function <span class="apidocSignatureSpan">warehouse.model.prototype.</span>updateById
        <span class="apidocSignatureSpan">(id, update, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateById = function (id, update, callback) {
  var self = this;

  return Promise.using(this._acquireWriteLock(), function() {
    var stack = self.schema._parseUpdate(update);
    return self._updateWithStack(id, stack);
  }).asCallback(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* Updates the document.
*
* @param {object} data
* @param {function} [callback]
* @return {Promise}
*/
Document.prototype.update = function(data, callback) {
 return this._model.<span class="apidocCodeKeywordSpan">updateById</span>(this._id, data, callback);
};

/**
* Replaces the document.
*
* @param {object} data
* @param {function} [callback]
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.mutex" id="apidoc.module.warehouse.mutex">module warehouse.mutex</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.mutex.mutex" id="apidoc.element.warehouse.mutex.mutex">
        function <span class="apidocSignatureSpan">warehouse.</span>mutex
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Mutex() {
  this._locked = false;
  this._queue = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.mutex.prototype" id="apidoc.module.warehouse.mutex.prototype">module warehouse.mutex.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.mutex.prototype.lock" id="apidoc.element.warehouse.mutex.prototype.lock">
        function <span class="apidocSignatureSpan">warehouse.mutex.prototype.</span>lock
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lock = function (fn) {
  if (this._locked) {
    this._queue.push(fn);
    return;
  }

  this._locked = true;
  fn();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @return {Promise}
* @private
*/
Model.prototype._acquireWriteLock = function(id) {
 var mutex = this._mutex;

 return new Promise(function(resolve, reject) {
   mutex.<span class="apidocCodeKeywordSpan">lock</span>(resolve);
 }).disposer(function() {
   mutex.unlock();
 });
};

/**
* Inserts a document.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.mutex.prototype.unlock" id="apidoc.element.warehouse.mutex.prototype.unlock">
        function <span class="apidocSignatureSpan">warehouse.mutex.prototype.</span>unlock
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unlock = function () {
  if (!this._locked) return;

  var next = this._queue.shift();

  if (next) {
    next();
  } else {
    this._locked = false;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*/
Model.prototype._acquireWriteLock = function(id) {
 var mutex = this._mutex;

 return new Promise(function(resolve, reject) {
   mutex.lock(resolve);
 }).disposer(function() {
   mutex.<span class="apidocCodeKeywordSpan">unlock</span>();
 });
};

/**
* Inserts a document.
*
* @param {Document|object} data
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.number" id="apidoc.module.warehouse.number">module warehouse.number</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.number.number" id="apidoc.element.warehouse.number.number">
        function <span class="apidocSignatureSpan">warehouse.</span>number
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeNumber(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.number.super_" id="apidoc.element.warehouse.number.super_">
        function <span class="apidocSignatureSpan">warehouse.number.</span>super_
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaType(name, options) {
  this.name = name || '';

  this.options = assign({
    required: false
  }, options);

  var default_ = this.options.default;

  if (typeof default_ === 'function') {
    this.default = default_;
  } else {
    this.default = function() {
      return default_;
    };
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.object" id="apidoc.module.warehouse.object">module warehouse.object</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.object.object" id="apidoc.element.warehouse.object.object">
        function <span class="apidocSignatureSpan">warehouse.</span>object
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeObject(name, options) {
  SchemaType.call(this, name, extend({
    default: {}
  }, options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.object.super_" id="apidoc.element.warehouse.object.super_">
        function <span class="apidocSignatureSpan">warehouse.object.</span>super_
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaType(name, options) {
  this.name = name || '';

  this.options = assign({
    required: false
  }, options);

  var default_ = this.options.default;

  if (typeof default_ === 'function') {
    this.default = default_;
  } else {
    this.default = function() {
      return default_;
    };
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.population" id="apidoc.module.warehouse.population">module warehouse.population</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.population.population" id="apidoc.element.warehouse.population.population">
        function <span class="apidocSignatureSpan">warehouse.</span>population
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PopulationError(msg) {
  WarehouseError.call(this);

  this.name = 'PopulationError';
  this.message = msg;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.population.super_" id="apidoc.element.warehouse.population.super_">
        function <span class="apidocSignatureSpan">warehouse.population.</span>super_
        <span class="apidocSignatureSpan">(msg, code)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WarehouseError(msg, code) {
  Error.call(this);

  if (Error.captureStackTrace) {
    Error.captureStackTrace(this);
  } else {
    this.stack = new Error().stack;
  }

  this.name = 'WarehouseError';
  this.message = msg;
  this.code = code;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.query" id="apidoc.module.warehouse.query">module warehouse.query</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.query.query" id="apidoc.element.warehouse.query.query">
        function <span class="apidocSignatureSpan">warehouse.</span>query
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Query(data) {
  this.data = data;
  this.length = data.length;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.query.prototype" id="apidoc.module.warehouse.query.prototype">module warehouse.query.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.count" id="apidoc.element.warehouse.query.prototype.count">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>count
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">count = function () {
  return this.length;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.each" id="apidoc.element.warehouse.query.prototype.each">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>each
        <span class="apidocSignatureSpan">(iterator)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">each = function (iterator) {
  var data = this.data;

  for (var i = 0, len = this.length; i &lt; len; i++) {
    iterator(data[i], i);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 return Boolean(this.data[id]);
};

function execHooks(schema, type, event, data) {
 var hooks = schema.hooks[type][event];
 if (!hooks.length) return Promise.resolve(data);

 return Promise.<span class="apidocCodeKeywordSpan">each</span>(hooks, function(hook) {
   return hook(data);
 }).thenReturn(data);
}

/**
* Acquires write lock.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.eq" id="apidoc.element.warehouse.query.prototype.eq">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>eq
        <span class="apidocSignatureSpan">(i)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">eq = function (i) {
  var index = i &lt; 0 ? this.length + i : i;
  return this.data[index];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Returns the first document.
*
* @param {Object} [options] See {@link Model#findById}.
* @return {Document|Object}
*/
Model.prototype.first = function(options) {
 return this.<span class="apidocCodeKeywordSpan">eq</span>(0, options);
};

/**
* Returns the last document.
*
* @param {Object} [options] See {@link Model#findById}.
* @return {Document|Object}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.every" id="apidoc.element.warehouse.query.prototype.every">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>every
        <span class="apidocSignatureSpan">(iterator)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">every = function (iterator) {
  var data = this.data;

  for (var i = 0, len = data.length; i &lt; len; i++) {
    if (!iterator(data[i], i)) return false;
  }

  return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.filter" id="apidoc.element.warehouse.query.prototype.filter">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>filter
        <span class="apidocSignatureSpan">(iterator)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">filter = function (iterator) {
  var data = this.data;
  var arr = [];
  var item;

  for (var i = 0, len = this.length; i &lt; len; i++) {
    item = data[i];
    if (iterator(item, i)) arr.push(item);
  }

  return new this.constructor(arr);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.find" id="apidoc.element.warehouse.query.prototype.find">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>find
        <span class="apidocSignatureSpan">(query, options_)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">find = function (query, options_) {
  var options = options_ || {};
  var filter = this._schema._execQuery(query);
  var data = this.data;
  var i = 0;
  var len = this.length;
  var limit = options.limit || len;
  var skip = options.skip;
  var arr = [];
  var item;

  for (; limit &amp;&amp; i &lt; len; i++) {
    item = data[i];

    if (filter(item)) {
      if (skip) {
        skip--;
      } else {
        arr.push(item);
        limit--;
      }
    }
  }

  return options.lean ? arr : new this.constructor(arr);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {object} query
* @param {object} data
* @param {function} [callback]
* @return {Promise}
*/
Model.prototype.update = function(query, data, callback) {
 return this.<span class="apidocCodeKeywordSpan">find</span>(query).update(data, callback);
};

/**
* Finds a document by its identifier and replace it.
*
* @param {*} id
* @param  {object} data
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.findOne" id="apidoc.element.warehouse.query.prototype.findOne">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>findOne
        <span class="apidocSignatureSpan">(query, options_)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findOne = function (query, options_) {
  var options = options_ || {};
  options.limit = 1;

  var result = this.find(query, options);
  return options.lean ? result[0] : result.data[0];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.first" id="apidoc.element.warehouse.query.prototype.first">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>first
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">first = function () {
  return this.eq(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.forEach" id="apidoc.element.warehouse.query.prototype.forEach">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>forEach
        <span class="apidocSignatureSpan">(iterator)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forEach = function (iterator) {
  var data = this.data;

  for (var i = 0, len = this.length; i &lt; len; i++) {
    iterator(data[i], i);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *
 * @param {Object} [options] See {@link Model#findById}.
 * @return {Array}
 */
Model.prototype.toArray = function(options) {
  var result = new Array(this.length);

  this.<span class="apidocCodeKeywordSpan">forEach</span>(function(item, i) {
    result[i] = item;
  }, options);

  return result;
};

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.last" id="apidoc.element.warehouse.query.prototype.last">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>last
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">last = function () {
  return this.eq(-1);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.limit" id="apidoc.element.warehouse.query.prototype.limit">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>limit
        <span class="apidocSignatureSpan">(i)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">limit = function (i) {
  return this.slice(0, i);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.map" id="apidoc.element.warehouse.query.prototype.map">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>map
        <span class="apidocSignatureSpan">(iterator)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">map = function (iterator) {
  var len = this.length;
  var result = new Array(len);
  var data = this.data;

  for (var i = 0; i &lt; len; i++) {
    result[i] = iterator(data[i], i);
  }

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {Object} data
* @param {Function} [callback]
* @return {Promise}
*/
Query.prototype.replace = function(data, callback) {
 var model = this._model;

 return Promise.<span class="apidocCodeKeywordSpan">map</span>(this.data, function(item) {
   return model.replaceById(item._id, data);
 }).asCallback(callback);
};

/**
* Remove all documents.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.populate" id="apidoc.element.warehouse.query.prototype.populate">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>populate
        <span class="apidocSignatureSpan">(expr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">populate = function (expr) {
  var stack = this._schema._parsePopulate(expr);
  var data = this.data;
  var model = this._model;

  for (var i = 0, len = this.length; i &lt; len; i++) {
    data[i] = model._populate(data[i], stack);
  }

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.random" id="apidoc.element.warehouse.query.prototype.random">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>random
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">random = function () {
  return new this.constructor(shuffle(this.data.slice()));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.reduce" id="apidoc.element.warehouse.query.prototype.reduce">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>reduce
        <span class="apidocSignatureSpan">(iterator, initial)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reduce = function (iterator, initial) {
  var len = this.length;
  var data = this.data;
  var result, i;

  if (initial === undefined) {
    i = 1;
    result = data[0];
  } else {
    i = 0;
    result = initial;
  }

  for (; i &lt; len; i++) {
    result = iterator(result, data[i], i);
  }

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.reduceRight" id="apidoc.element.warehouse.query.prototype.reduceRight">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>reduceRight
        <span class="apidocSignatureSpan">(iterator, initial)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reduceRight = function (iterator, initial) {
  var len = this.length;
  var data = this.data;
  var result, i;

  if (initial === undefined) {
    i = len - 2;
    result = data[len - 1];
  } else {
    i = len - 1;
    result = initial;
  }

  for (; i &gt;= 0; i--) {
    result = iterator(result, data[i], i);
  }

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.remove" id="apidoc.element.warehouse.query.prototype.remove">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>remove
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (callback) {
  var model = this._model;

  return Promise.mapSeries(this.data, function(item) {
    return model.removeById(item._id);
  }).asCallback(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Removes matching documents.
 *
 * @param {object} query
 * @param {object} [callback]
 * @return {Promise}
 */
Model.prototype.remove = function(query, callback) {
return this.find(query).<span class="apidocCodeKeywordSpan">remove</span>(callback);
};

/**
 * Deletes a model.
 */
Model.prototype.destroy = function() {
this._database._models[this.name] = null;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.replace" id="apidoc.element.warehouse.query.prototype.replace">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>replace
        <span class="apidocSignatureSpan">(data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">replace = function (data, callback) {
  var model = this._model;

  return Promise.map(this.data, function(item) {
    return model.replaceById(item._id, data);
  }).asCallback(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {object} query
* @param {object} data
* @param {function} [callback]
* @return {Promise}
*/
Model.prototype.replace = function(query, data, callback) {
 return this.find(query).<span class="apidocCodeKeywordSpan">replace</span>(data, callback);
};

/**
* Finds a document by its identifier and remove it.
*
* @param {*} id
* @param {function} [callback]
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.reverse" id="apidoc.element.warehouse.query.prototype.reverse">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>reverse
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reverse = function () {
  return new this.constructor(reverse(this.data.slice()));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.shuffle" id="apidoc.element.warehouse.query.prototype.shuffle">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>shuffle
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">shuffle = function () {
  return new this.constructor(shuffle(this.data.slice()));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.size" id="apidoc.element.warehouse.query.prototype.size">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>size
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">size = function () {
  return this.length;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.skip" id="apidoc.element.warehouse.query.prototype.skip">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>skip
        <span class="apidocSignatureSpan">(i)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">skip = function (i) {
  return this.slice(i);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.slice" id="apidoc.element.warehouse.query.prototype.slice">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>slice
        <span class="apidocSignatureSpan">(start, end)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">slice = function (start, end) {
  return new this.constructor(this.data.slice(start, end));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Limits the number of documents returned.
*
* @param {Number} i
* @return {Query}
*/
Model.prototype.limit = function(i) {
 return this.<span class="apidocCodeKeywordSpan">slice</span>(0, i);
};

/**
* Specifies the number of items to skip.
*
* @param {Number} i
* @return {Query}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.some" id="apidoc.element.warehouse.query.prototype.some">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>some
        <span class="apidocSignatureSpan">(iterator)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">some = function (iterator) {
  var data = this.data;

  for (var i = 0, len = data.length; i &lt; len; i++) {
    if (iterator(data[i], i)) return true;
  }

  return false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.sort" id="apidoc.element.warehouse.query.prototype.sort">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>sort
        <span class="apidocSignatureSpan">(orderby, order)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sort = function (orderby, order) {
  var sort = parseArgs(orderby, order);
  var fn = this._schema._execSort(sort);

  return new this.constructor(this.data.slice().sort(fn));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {String|Number} [order]
* @return {Query}
*/
Model.prototype.sort = function(orderby, order) {
 var sort = parseArgs(orderby, order);
 var fn = this.schema._execSort(sort);

 return new this.Query(this.toArray().<span class="apidocCodeKeywordSpan">sort</span>(fn));
};

/**
* Returns the document at the specified index. `num` can be a positive or
* negative number.
*
* @param {Number} i
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.toArray" id="apidoc.element.warehouse.query.prototype.toArray">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>toArray
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toArray = function () {
  return this.data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {String|Number} [order]
* @return {Query}
*/
Model.prototype.sort = function(orderby, order) {
 var sort = parseArgs(orderby, order);
 var fn = this.schema._execSort(sort);

 return new this.Query(this.<span class="apidocCodeKeywordSpan">toArray</span>().sort(fn));
};

/**
* Returns the document at the specified index. `num` can be a positive or
* negative number.
*
* @param {Number} i
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.query.prototype.update" id="apidoc.element.warehouse.query.prototype.update">
        function <span class="apidocSignatureSpan">warehouse.query.prototype.</span>update
        <span class="apidocSignatureSpan">(data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (data, callback) {
  var model = this._model;
  var stack = this._schema._parseUpdate(data);

  return Promise.mapSeries(this.data, function(item) {
    return model._updateWithStack(item._id, stack);
  }).asCallback(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {object} query
* @param {object} data
* @param {function} [callback]
* @return {Promise}
*/
Model.prototype.update = function(query, data, callback) {
 return this.find(query).<span class="apidocCodeKeywordSpan">update</span>(data, callback);
};

/**
* Finds a document by its identifier and replace it.
*
* @param {*} id
* @param  {object} data
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.string" id="apidoc.module.warehouse.string">module warehouse.string</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.string.string" id="apidoc.element.warehouse.string.string">
        function <span class="apidocSignatureSpan">warehouse.</span>string
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeString(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.string.super_" id="apidoc.element.warehouse.string.super_">
        function <span class="apidocSignatureSpan">warehouse.string.</span>super_
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaType(name, options) {
  this.name = name || '';

  this.options = assign({
    required: false
  }, options);

  var default_ = this.options.default;

  if (typeof default_ === 'function') {
    this.default = default_;
  } else {
    this.default = function() {
      return default_;
    };
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.util" id="apidoc.module.warehouse.util">module warehouse.util</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.util.arr2obj" id="apidoc.element.warehouse.util.arr2obj">
        function <span class="apidocSignatureSpan">warehouse.util.</span>arr2obj
        <span class="apidocSignatureSpan">(arr, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">arr2obj = function (arr, value) {
  if (!Array.isArray(arr)) throw new TypeError('arr must be an array!');

  var obj = {};
  var i = arr.length;

  while (i--) {
    obj[arr[i]] = value;
  }

  return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.util.delProp" id="apidoc.element.warehouse.util.delProp">
        function <span class="apidocSignatureSpan">warehouse.util.</span>delProp
        <span class="apidocSignatureSpan">(obj, key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">delProp = function (obj, key) {
  if (typeof obj !== 'object') throw new TypeError('obj must be an object!');
  if (!key) throw new TypeError('key is required!');

  var token = extractPropKey(key);
  var lastKey = token.pop();
  var len = token.length;

  if (!len) {
    delete obj[lastKey];
    return;
  }

  var cursor = obj;
  var name;

  for (var i = 0; i &lt; len; i++) {
    name = token[i];

    if (cursor[name]) {
      cursor = cursor[name];
    } else {
      return;
    }
  }

  delete cursor[lastKey];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.util.getProp" id="apidoc.element.warehouse.util.getProp">
        function <span class="apidocSignatureSpan">warehouse.util.</span>getProp
        <span class="apidocSignatureSpan">(obj, key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getProp = function (obj, key) {
  if (typeof obj !== 'object') throw new TypeError('obj must be an object!');
  if (!key) throw new TypeError('key is required!');

  var token = extractPropKey(key);
  var result = obj[token.shift()];
  var len = token.length;

  if (!len) return result;

  for (var i = 0; i &lt; len; i++) {
    result = result[token[i]];
  }

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.util.inherits" id="apidoc.element.warehouse.util.inherits">
        function <span class="apidocSignatureSpan">warehouse.util.</span>inherits
        <span class="apidocSignatureSpan">(ctor, superCtor)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inherits = function (ctor, superCtor) {

  if (ctor === undefined || ctor === null)
    throw new TypeError('The constructor to "inherits" must not be ' +
                        'null or undefined');

  if (superCtor === undefined || superCtor === null)
    throw new TypeError('The super constructor to "inherits" must not ' +
                        'be null or undefined');

  if (superCtor.prototype === undefined)
    throw new TypeError('The super constructor to "inherits" must ' +
                        'have a prototype');

  ctor.super_ = superCtor;
  Object.setPrototypeOf(ctor.prototype, superCtor.prototype);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

 this._models = {};

 var _Model = this.Model = function(name, schema) {
   Model.call(this, name, schema);
 };

 util.<span class="apidocCodeKeywordSpan">inherits</span>(_Model, Model);
 _Model.prototype._database = this;
}

/**
* Creates a new model.
*
* @param {string} name
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.util.isDate" id="apidoc.element.warehouse.util.isDate">
        function <span class="apidocSignatureSpan">warehouse.util.</span>isDate
        <span class="apidocSignatureSpan">(d)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isDate(d) {
  return binding.isDate(d);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {*} value
* @param {Object} data
* @return {Date}
*/
SchemaTypeDate.prototype.cast = function(value_, data) {
 var value = SchemaType.prototype.cast.call(this, value_, data);

 if (value == null || util.<span class="apidocCodeKeywordSpan">isDate</span>(value)) return value;

 return new Date(value);
};

/**
* Validates data.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.util.parseArgs" id="apidoc.element.warehouse.util.parseArgs">
        function <span class="apidocSignatureSpan">warehouse.util.</span>parseArgs
        <span class="apidocSignatureSpan">(orderby, order)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseArgs = function (orderby, order) {
  var result;

  if (order) {
    result = {};
    result[orderby] = order;
  } else if (typeof orderby === 'string') {
    result = parseArgs(orderby);
  } else {
    result = orderby;
  }

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.util.reverse" id="apidoc.element.warehouse.util.reverse">
        function <span class="apidocSignatureSpan">warehouse.util.</span>reverse
        <span class="apidocSignatureSpan">(arr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reverse = function (arr) {
  if (!Array.isArray(arr)) throw new TypeError('arr must be an array!');

  var len = arr.length;
  var tmp;

  if (!len) return arr;

  for (var left = 0, right = len - 1; left &lt; right; left++, right--) {
    tmp = arr[left];
    arr[left] = arr[right];
    arr[right] = tmp;
  }

  return arr;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.util.setGetter" id="apidoc.element.warehouse.util.setGetter">
        function <span class="apidocSignatureSpan">warehouse.util.</span>setGetter
        <span class="apidocSignatureSpan">(obj, key, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setGetter = function (obj, key, fn) {
  if (typeof obj !== 'object') throw new TypeError('obj must be an object!');
  if (!key) throw new TypeError('key is required!');
  if (typeof fn !== 'function') throw new TypeError('fn must be a function!');

  var token = extractPropKey(key);
  var lastKey = token.pop();
  var len = token.length;

  if (!len) {
    obj.__defineGetter__(lastKey, fn);
    return;
  }

  var cursor = obj;
  var name;

  for (var i = 0; i &lt; len; i++) {
    name = token[i];
    cursor = cursor[name] = cursor[name] || {};
  }

  cursor.__defineGetter__(lastKey, fn);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.util.setProp" id="apidoc.element.warehouse.util.setProp">
        function <span class="apidocSignatureSpan">warehouse.util.</span>setProp
        <span class="apidocSignatureSpan">(obj, key, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setProp = function (obj, key, value) {
  if (typeof obj !== 'object') throw new TypeError('obj must be an object!');
  if (!key) throw new TypeError('key is required!');

  var token = extractPropKey(key);
  var lastKey = token.pop();
  var len = token.length;

  if (!len) {
    obj[lastKey] = value;
    return;
  }

  var cursor = obj;
  var name;

  for (var i = 0; i &lt; len; i++) {
    name = token[i];
    cursor = cursor[name] = cursor[name] || {};
  }

  cursor[lastKey] = value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.validation" id="apidoc.module.warehouse.validation">module warehouse.validation</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.validation.validation" id="apidoc.element.warehouse.validation.validation">
        function <span class="apidocSignatureSpan">warehouse.</span>validation
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ValidationError(msg) {
  WarehouseError.call(this);

  this.name = 'ValidationError';
  this.message = msg;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.validation.super_" id="apidoc.element.warehouse.validation.super_">
        function <span class="apidocSignatureSpan">warehouse.validation.</span>super_
        <span class="apidocSignatureSpan">(msg, code)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WarehouseError(msg, code) {
  Error.call(this);

  if (Error.captureStackTrace) {
    Error.captureStackTrace(this);
  } else {
    this.stack = new Error().stack;
  }

  this.name = 'WarehouseError';
  this.message = msg;
  this.code = code;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.warehouse.virtual" id="apidoc.module.warehouse.virtual">module warehouse.virtual</a></h1>


    <h2>
        <a href="#apidoc.element.warehouse.virtual.virtual" id="apidoc.element.warehouse.virtual.virtual">
        function <span class="apidocSignatureSpan">warehouse.</span>virtual
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaTypeVirtual(name, options) {
  SchemaType.call(this, name, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.warehouse.virtual.super_" id="apidoc.element.warehouse.virtual.super_">
        function <span class="apidocSignatureSpan">warehouse.virtual.</span>super_
        <span class="apidocSignatureSpan">(name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaType(name, options) {
  this.name = name || '';

  this.options = assign({
    required: false
  }, options);

  var default_ = this.options.default;

  if (typeof default_ === 'function') {
    this.default = default_;
  } else {
    this.default = function() {
      return default_;
    };
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>